<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval'">
<title>Racing Dynamics - è³½è»Šå‹•æ…‹åˆ†æç³»çµ±</title>
<script src="lib/tailwind.js"></script>
<script defer src="lib/alpine.min.js"></script>
<script src="lib/chart.min.js"></script>
<style>
:root{--bg:#0b1120;--bg2:#111827;--card:#1e293b;--card2:#334155;--accent:#38bdf8;--pink:#f472b6;--green:#34d399;--yellow:#facc15;--red:#ef4444;--text:#e2e8f0;--muted:#94a3b8}
body{background:var(--bg);color:var(--text);font-family:-apple-system,system-ui,sans-serif;margin:0}
.card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:12px}
.card2{background:var(--card2);border-radius:8px}
input,select{background:var(--card2);color:var(--text);border:1px solid rgba(255,255,255,.12);border-radius:6px;padding:6px 10px;font-size:.85rem}
input:focus,select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(56,189,248,.2)}
.btn{padding:8px 16px;border-radius:8px;font-weight:600;cursor:pointer;transition:.15s;font-size:.85rem;border:none}
.btn-primary{background:var(--accent);color:#0f172a}.btn-primary:hover{background:#7dd3fc}
.btn-sm{padding:4px 12px;font-size:.75rem;border-radius:6px}
.nav-btn{padding:12px 16px;border-radius:10px;cursor:pointer;transition:.2s;border:1px solid transparent;text-align:center;min-width:80px}
.nav-btn:hover{background:rgba(56,189,248,.08)}
.nav-btn.active{background:rgba(56,189,248,.15);border-color:rgba(56,189,248,.3)}
.badge{display:inline-block;padding:2px 8px;border-radius:99px;font-size:.65rem;font-weight:600}
.badge-b{background:rgba(56,189,248,.15);color:#38bdf8}
.badge-p{background:rgba(244,114,182,.15);color:#f472b6}
.badge-g{background:rgba(52,211,153,.15);color:#34d399}
.badge-y{background:rgba(250,204,21,.15);color:#facc15}
.badge-r{background:rgba(239,68,68,.15);color:#ef4444}
table{width:100%;border-collapse:collapse}
th{text-align:left;padding:6px 10px;color:var(--muted);font-size:.7rem;text-transform:uppercase;letter-spacing:.05em;border-bottom:1px solid rgba(255,255,255,.08)}
td{padding:6px 10px;border-bottom:1px solid rgba(255,255,255,.04);font-size:.8rem}
.gauge-bar{height:32px;border-radius:8px;position:relative;overflow:hidden;background:linear-gradient(90deg,var(--accent) 0%,var(--green) 35%,var(--yellow) 50%,var(--pink) 65%,var(--red) 100%)}
.gauge-needle{position:absolute;top:0;width:4px;height:100%;background:#fff;border-radius:2px;transition:left .5s ease;box-shadow:0 0 8px rgba(255,255,255,.8)}
.gauge-label{position:absolute;bottom:-18px;font-size:.65rem;color:var(--muted);transform:translateX(-50%)}
.section-title{font-size:1rem;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:8px}
.grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.corner-box{padding:12px;border-radius:8px;text-align:center;background:var(--card2)}
.corner-box .val{font-size:1.1rem;font-weight:700}
.corner-box .lbl{font-size:.65rem;color:var(--muted);margin-top:2px}
.tier-tab{padding:10px 20px;border-radius:8px 8px 0 0;cursor:pointer;font-weight:600;font-size:.85rem;transition:.2s;border:1px solid transparent;border-bottom:none}
.tier-tab.active{background:var(--card);border-color:rgba(255,255,255,.06)}
.tier-tab:not(.active){background:transparent;color:var(--muted)}
.warn{background:rgba(250,204,21,.08);border:1px solid rgba(250,204,21,.2);border-radius:8px;padding:8px 12px;font-size:.8rem;color:#fde047}
canvas{max-height:300px}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:3px}
</style>
</head>
<body x-data="app()" x-init="init()">

<!-- Top Nav -->
<header class="flex items-center justify-between px-6 py-3 border-b border-white/5" style="background:var(--bg2)">
  <div class="flex items-center gap-3">
    <div class="text-lg font-bold text-sky-400">Racing Dynamics</div>
    <div class="text-xs text-slate-600">è³½è»Šå‹•æ…‹åˆ†æç³»çµ± v3.3 Desktop</div>
  </div>
  <div class="flex gap-2">
    <template x-for="tab in tabs" :key="tab.id">
      <div class="nav-btn" :class="{'active': currentTab===tab.id}" @click="switchTab(tab.id)">
        <div class="text-xs font-semibold" x-text="tab.label"></div>
        <div class="text-[10px] text-slate-500" x-text="tab.sub"></div>
      </div>
    </template>
  </div>
</header>

<main class="p-6 max-w-7xl mx-auto">

<!-- ==================== TAB: è½‰å‘è¶¨å‹¢é æ¸¬ ==================== -->
<div x-show="currentTab==='predict'" x-transition>
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-xl font-bold">è½‰å‘è¶¨å‹¢é æ¸¬å™¨</h2>
    <!-- Mode toggle -->
    <div class="flex items-center gap-3">
      <div class="flex rounded-lg overflow-hidden border border-white/10">
        <button class="px-4 py-2 text-xs font-semibold transition-colors" :class="streetMode ? 'bg-transparent text-slate-400' : 'bg-sky-500 text-white'" @click="streetMode=false; streetCar=''">å°ˆæ¥­æ¨¡å¼</button>
        <button class="px-4 py-2 text-xs font-semibold transition-colors" :class="streetMode ? 'bg-green-500 text-white' : 'bg-transparent text-slate-400'" @click="streetMode=true; if(!carPresets.length) loadPresets()">è¡—è»Šæ¨¡å¼</button>
      </div>
    </div>
  </div>

  <!-- Street mode: car selection -->
  <div x-show="streetMode" x-transition class="card p-4 mb-4">
    <div class="flex items-center gap-4 flex-wrap">
      <div>
        <label class="text-xs text-slate-400">é¸æ“‡è»Šç¨®</label>
        <select x-model="streetCar" @change="applyPreset()" class="ml-2 text-sm min-w-[280px]">
          <option value="">-- è«‹é¸æ“‡è»Šç¨® (112 å°) --</option>
          <template x-for="g in carPresetGroups" :key="g.label">
            <optgroup :label="g.label">
              <template x-for="c in g.cars" :key="c.id">
                <option :value="c.id" x-text="c.name_zh + ' (' + c.years + ')'"></option>
              </template>
            </optgroup>
          </template>
        </select>
      </div>
      <template x-if="streetCarDetail">
        <div class="flex items-center gap-3 text-xs">
          <span class="badge badge-g" x-text="streetCarDetail.layout"></span>
          <span class="text-slate-400" x-text="streetCarDetail.params.total_weight + 'kg'"></span>
          <span class="text-slate-400" x-text="'F' + streetCarDetail.params.weight_front_pct + '% / R' + (100-streetCarDetail.params.weight_front_pct) + '%'"></span>
          <span class="text-slate-400" x-text="streetCarDetail.oem_tire"></span>
          <span class="text-slate-400" x-text="streetCarDetail.oem_tire_size"></span>
        </div>
      </template>
    </div>
    <!-- OEM Tire Specs Detail -->
    <template x-if="streetCarDetail?.oem_tire_specs">
      <div class="mt-3 p-3 rounded-lg bg-slate-800/50 border border-white/5">
        <div class="text-[10px] font-semibold text-slate-400 mb-2">ğŸ› OEM è¼ªèƒè¦æ ¼ â†’ å½ˆç°§ç‡ä¼°ç®—</div>
        <div class="grid grid-cols-2 gap-4 text-xs">
          <div>
            <span class="text-slate-500">å‰è¼ª</span>
            <span class="text-slate-300 ml-1" x-text="streetCarDetail.oem_tire_specs.front.width + '/' + streetCarDetail.oem_tire_specs.front.aspect + ' R' + streetCarDetail.oem_tire_specs.front.rim"></span>
            <span class="text-sky-400 ml-2" x-text="'â‰ˆ ' + api.estimateTireSpring(streetCarDetail.oem_tire_specs.front.width, streetCarDetail.oem_tire_specs.front.aspect) + ' N/mm'"></span>
          </div>
          <div>
            <span class="text-slate-500">å¾Œè¼ª</span>
            <span class="text-slate-300 ml-1" x-text="streetCarDetail.oem_tire_specs.rear.width + '/' + streetCarDetail.oem_tire_specs.rear.aspect + ' R' + streetCarDetail.oem_tire_specs.rear.rim"></span>
            <span class="text-sky-400 ml-2" x-text="'â‰ˆ ' + api.estimateTireSpring(streetCarDetail.oem_tire_specs.rear.width, streetCarDetail.oem_tire_specs.rear.aspect) + ' N/mm'"></span>
          </div>
        </div>
      </div>
    </template>
    <!-- Data confidence badges -->
    <template x-if="streetCarDetail?.confidence">
      <div class="flex gap-2 mt-3 flex-wrap">
        <template x-for="(level, key) in streetCarDetail.confidence" :key="key">
          <span class="text-[10px] px-2 py-0.5 rounded-full" :class="level==='confirmed'?'bg-green-900/30 text-green-400':level==='estimated'?'bg-yellow-900/30 text-yellow-400':'bg-red-900/30 text-red-400'" x-text="key + ': ' + (level==='confirmed'?'å·²ç¢ºèª':level==='estimated'?'ä¼°ç®—':'ç„¡å…¬é–‹æ•¸æ“š')"></span>
        </template>
      </div>
    </template>
    <div x-show="streetCarDetail?.notes" class="text-xs text-slate-500 mt-2" x-text="streetCarDetail?.notes"></div>
  </div>

  <!-- Tier tabs -->
  <div class="flex gap-1 mb-0">
    <div class="tier-tab" :class="{'active':tier===1}" @click="switchTier(1)">Tier 1 å¿«é€Ÿ</div>
    <div class="tier-tab" :class="{'active':tier===2}" @click="switchTier(2)">Tier 2 è¼ªèƒè©³ç´°</div>
    <div class="tier-tab" :class="{'active':tier===3}" @click="switchTier(3)">Tier 3 å®Œæ•´</div>
  </div>

  <div class="card p-5">
    <div class="grid-2">
      <!-- LEFT: Inputs -->
      <div class="space-y-4">

        <!-- Tier 1: Mechanical -->
        <div>
          <div class="section-title"><span class="badge badge-b">Tier 1</span> æ©Ÿæ¢°è¨­å®š
            <span x-show="streetMode && streetCar" class="text-[10px] text-yellow-400 ml-2">é–å®šä¸­ â€” ç”±è»Šç¨®é è¨­å¸¶å…¥</span>
          </div>
          <!-- Street mode: locked summary -->
          <div x-show="streetMode && streetCar" class="card2 p-3 mb-3 text-xs text-slate-400 space-y-1">
            <div class="flex items-center justify-between mb-1">
              <span class="text-[10px] text-slate-500">è»Šç¨®å›ºå®šåƒæ•¸</span>
              <button class="text-[10px] px-2 py-0.5 rounded bg-slate-600 text-slate-300 hover:bg-slate-500" @click="applyPreset()">å…¨éƒ¨é‚„åŸé è¨­</button>
            </div>
            <div class="grid grid-cols-3 gap-2">
              <span>å½ˆç°§: F <b class="text-slate-200" x-text="pred.front_spring_rate"></b> / R <b class="text-slate-200" x-text="pred.rear_spring_rate"></b> N/mm</span>
              <span>ARB: F <b class="text-slate-200" x-text="pred.front_arb"></b> / R <b class="text-slate-200" x-text="pred.rear_arb"></b> Nm/deg</span>
              <span>é…é‡: F <b class="text-slate-200" x-text="pred.weight_front_pct + '%'"></b></span>
            </div>
            <div class="grid grid-cols-3 gap-2">
              <span>è¼ªè·: F <b class="text-slate-200" x-text="pred.front_track"></b> / R <b class="text-slate-200" x-text="pred.rear_track"></b></span>
              <span>ç¸½é‡: <b class="text-slate-200" x-text="pred.total_weight + 'kg'"></b></span>
              <span>è»¸è·: <b class="text-slate-200" x-text="pred.wheelbase + 'mm'"></b></span>
            </div>
          </div>
          <!-- Street mode: Damper adjust (if car has adjustable dampers) -->
          <div x-show="streetMode && streetCar && streetCarDetail?.damper_adjustable && tier >= 3" class="mb-3">
            <div class="flex items-center justify-between mb-2">
              <span class="text-xs text-green-400 font-semibold">å¯èª¿é˜»å°¼</span>
              <button class="text-[10px] px-2 py-0.5 rounded bg-slate-600 text-slate-300 hover:bg-slate-500" @click="resetDamper()">é‚„åŸé˜»å°¼é è¨­</button>
            </div>
            <div class="grid-4 text-sm">
              <div><label class="text-xs text-slate-400">å‰ Bump (kgf)</label><input type="number" x-model.number="adv.front_bump_force" class="w-full mt-1"></div>
              <div><label class="text-xs text-slate-400">å‰ Rebound</label><input type="number" x-model.number="adv.front_rebound_force" class="w-full mt-1"></div>
              <div><label class="text-xs text-slate-400">å¾Œ Bump (kgf)</label><input type="number" x-model.number="adv.rear_bump_force" class="w-full mt-1"></div>
              <div><label class="text-xs text-slate-400">å¾Œ Rebound</label><input type="number" x-model.number="adv.rear_rebound_force" class="w-full mt-1"></div>
            </div>
            <div class="text-[10px] text-slate-500 mt-1">ç„¡æ³•å–å¾—ç²¾ç¢ºé˜»å°¼åŠ›å€¼æ™‚ï¼Œå¯ä»¥èª¿æ®µæ•¸æ¯”ä¾‹æ„Ÿå—è¶¨å‹¢æ–¹å‘</div>
          </div>
          <!-- Pro mode: all fields -->
          <div x-show="!streetMode || !streetCar" class="grid-2 text-sm">
            <div>
              <label class="text-xs text-slate-400">å‰å½ˆç°§ç‡ (N/mm)</label>
              <input type="number" x-model.number="pred.front_spring_rate" class="w-full mt-1" step="10">
            </div>
            <div>
              <label class="text-xs text-slate-400">å¾Œå½ˆç°§ç‡ (N/mm)</label>
              <input type="number" x-model.number="pred.rear_spring_rate" class="w-full mt-1" step="10">
            </div>
            <div>
              <label class="text-xs text-slate-400">å‰ ARB (Nm/deg)</label>
              <input type="number" x-model.number="pred.front_arb" class="w-full mt-1" step="10">
            </div>
            <div>
              <label class="text-xs text-slate-400">å¾Œ ARB (Nm/deg)</label>
              <input type="number" x-model.number="pred.rear_arb" class="w-full mt-1" step="10">
            </div>
            <div>
              <label class="text-xs text-slate-400">å‰è¼ªè· (mm)</label>
              <input type="number" x-model.number="pred.front_track" class="w-full mt-1">
            </div>
            <div>
              <label class="text-xs text-slate-400">å¾Œè¼ªè· (mm)</label>
              <input type="number" x-model.number="pred.rear_track" class="w-full mt-1">
            </div>
            <div>
              <label class="text-xs text-slate-400">å‰ Motion Ratio</label>
              <input type="number" x-model.number="pred.front_motion_ratio" class="w-full mt-1" step="0.01">
            </div>
            <div>
              <label class="text-xs text-slate-400">å¾Œ Motion Ratio</label>
              <input type="number" x-model.number="pred.rear_motion_ratio" class="w-full mt-1" step="0.01">
            </div>
            <div>
              <label class="text-xs text-slate-400">å‰è»¸è·é‡ %</label>
              <input type="number" x-model.number="pred.weight_front_pct" class="w-full mt-1" step="0.5">
            </div>
            <div>
              <label class="text-xs text-slate-400">ç¸½é‡ (kg)</label>
              <input type="number" x-model.number="pred.total_weight" class="w-full mt-1">
            </div>
            <div>
              <label class="text-xs text-slate-400">CG é«˜åº¦ (mm)</label>
              <input type="number" x-model.number="pred.cg_height" class="w-full mt-1">
            </div>
            <div>
              <label class="text-xs text-slate-400">è»¸è· (mm)</label>
              <input type="number" x-model.number="pred.wheelbase" class="w-full mt-1">
            </div>
          </div>
          <!-- Advanced T1 parameters (collapsible) -->
          <div class="mt-3">
            <button class="text-[10px] text-slate-500 hover:text-slate-300 flex items-center gap-1" @click="showAdvancedT1=!showAdvancedT1">
              <span x-text="showAdvancedT1 ? 'â–¼' : 'â–¶'"></span>
              é€²éšåƒæ•¸ï¼ˆè¼ªèƒå½ˆæ€§ã€Roll Centerã€è¼ªåœˆå‡ç´šï¼‰
            </button>
            <div x-show="showAdvancedT1" x-transition class="mt-2 text-sm space-y-3">
              <div class="grid grid-cols-3 gap-2">
                <div>
                  <label class="text-xs text-slate-400">è¼ªèƒå½ˆç°§ç‡ (N/mm)</label>
                  <input type="number" x-model.number="pred.tire_spring_rate" class="w-full mt-1" step="10">
                  <div class="text-[10px] text-slate-600 mt-0.5" x-show="streetCarDetail?.oem_tire_specs" x-text="'OEM ä¼°ç®—: F ' + wheelUpgrade.oem_front_spring + ' / R ' + wheelUpgrade.oem_rear_spring + ' N/mm'"></div>
                </div>
                <div>
                  <label class="text-xs text-slate-400">å‰ RC é«˜åº¦ (mm)</label>
                  <input type="number" x-model.number="pred.front_roll_center_height" class="w-full mt-1" step="5">
                </div>
                <div>
                  <label class="text-xs text-slate-400">å¾Œ RC é«˜åº¦ (mm)</label>
                  <input type="number" x-model.number="pred.rear_roll_center_height" class="w-full mt-1" step="5">
                </div>
              </div>
              <!-- Wheel Upgrade Section -->
              <template x-if="streetCarDetail?.oem_tire_specs">
                <div class="p-3 rounded-lg bg-slate-800/50 border border-white/5">
                  <div class="flex items-center gap-2 mb-2">
                    <label class="flex items-center gap-1 cursor-pointer">
                      <input type="checkbox" x-model="wheelUpgrade.enabled" @change="applyWheelUpgrade()" class="rounded bg-slate-700 border-slate-600">
                      <span class="text-xs font-semibold text-slate-300">ğŸ”§ æ¨¡æ“¬è¼ªåœˆå‡ç´š</span>
                    </label>
                    <span class="text-[10px] text-slate-500">ï¼ˆä¿æŒå¤–å¾‘ä¸è®Šï¼Œè‡ªå‹•é‡ç®—æ‰å¹³æ¯”èˆ‡å½ˆç°§ç‡ï¼‰</span>
                  </div>
                  <div x-show="wheelUpgrade.enabled" x-transition>
                    <div class="grid grid-cols-2 gap-4">
                      <!-- Front wheel -->
                      <div class="space-y-1">
                        <div class="text-[10px] text-slate-500 font-semibold">å‰è¼ª</div>
                        <div class="text-[10px] text-slate-600" x-text="'OEM: ' + streetCarDetail.oem_tire_specs.front.width + '/' + streetCarDetail.oem_tire_specs.front.aspect + ' R' + streetCarDetail.oem_tire_specs.front.rim"></div>
                        <div class="grid grid-cols-2 gap-1">
                          <div>
                            <label class="text-[10px] text-slate-500">è¼ªåœˆ (å‹)</label>
                            <select x-model.number="wheelUpgrade.front_rim" @change="applyWheelUpgrade()" class="w-full text-xs">
                              <template x-for="r in api.suggestRimSizes(streetCarDetail.oem_tire_specs.front.rim)" :key="'fr'+r">
                                <option :value="r" x-text="r + '\"' + (r===streetCarDetail.oem_tire_specs.front.rim?' (OEM)':'')"></option>
                              </template>
                            </select>
                          </div>
                          <div>
                            <label class="text-[10px] text-slate-500">èƒå¯¬ (mm)</label>
                            <input type="number" x-model.number="wheelUpgrade.front_width" @change="applyWheelUpgrade()" class="w-full text-xs" step="5">
                          </div>
                        </div>
                        <template x-if="wheelUpgrade.front_result && !wheelUpgrade.front_result.error">
                          <div class="text-[10px] p-1.5 rounded bg-slate-900/50 space-y-0.5">
                            <div class="text-slate-300">â†’ <span x-text="wheelUpgrade.front_width + '/' + wheelUpgrade.front_result.aspect + ' R' + wheelUpgrade.front_rim"></span></div>
                            <div class="text-sky-400">å½ˆç°§ç‡: <span x-text="wheelUpgrade.front_result.spring_rate"></span> N/mm</div>
                            <div class="text-slate-500">èƒå£: <span x-text="wheelUpgrade.front_result.sidewall_height"></span>mm (<span x-text="wheelUpgrade.front_result.sidewall_change_pct > 0 ? '+' : ''"></span><span x-text="wheelUpgrade.front_result.sidewall_change_pct"></span>%)</div>
                          </div>
                        </template>
                        <template x-if="wheelUpgrade.front_result?.error">
                          <div class="text-[10px] text-red-400 p-1" x-text="wheelUpgrade.front_result.message"></div>
                        </template>
                      </div>
                      <!-- Rear wheel -->
                      <div class="space-y-1">
                        <div class="text-[10px] text-slate-500 font-semibold">å¾Œè¼ª</div>
                        <div class="text-[10px] text-slate-600" x-text="'OEM: ' + streetCarDetail.oem_tire_specs.rear.width + '/' + streetCarDetail.oem_tire_specs.rear.aspect + ' R' + streetCarDetail.oem_tire_specs.rear.rim"></div>
                        <div class="grid grid-cols-2 gap-1">
                          <div>
                            <label class="text-[10px] text-slate-500">è¼ªåœˆ (å‹)</label>
                            <select x-model.number="wheelUpgrade.rear_rim" @change="applyWheelUpgrade()" class="w-full text-xs">
                              <template x-for="r in api.suggestRimSizes(streetCarDetail.oem_tire_specs.rear.rim)" :key="'rr'+r">
                                <option :value="r" x-text="r + '\"' + (r===streetCarDetail.oem_tire_specs.rear.rim?' (OEM)':'')"></option>
                              </template>
                            </select>
                          </div>
                          <div>
                            <label class="text-[10px] text-slate-500">èƒå¯¬ (mm)</label>
                            <input type="number" x-model.number="wheelUpgrade.rear_width" @change="applyWheelUpgrade()" class="w-full text-xs" step="5">
                          </div>
                        </div>
                        <template x-if="wheelUpgrade.rear_result && !wheelUpgrade.rear_result.error">
                          <div class="text-[10px] p-1.5 rounded bg-slate-900/50 space-y-0.5">
                            <div class="text-slate-300">â†’ <span x-text="wheelUpgrade.rear_width + '/' + wheelUpgrade.rear_result.aspect + ' R' + wheelUpgrade.rear_rim"></span></div>
                            <div class="text-sky-400">å½ˆç°§ç‡: <span x-text="wheelUpgrade.rear_result.spring_rate"></span> N/mm</div>
                            <div class="text-slate-500">èƒå£: <span x-text="wheelUpgrade.rear_result.sidewall_height"></span>mm (<span x-text="wheelUpgrade.rear_result.sidewall_change_pct > 0 ? '+' : ''"></span><span x-text="wheelUpgrade.rear_result.sidewall_change_pct"></span>%)</div>
                          </div>
                        </template>
                        <template x-if="wheelUpgrade.rear_result?.error">
                          <div class="text-[10px] text-red-400 p-1" x-text="wheelUpgrade.rear_result.message"></div>
                        </template>
                      </div>
                    </div>
                    <!-- Apply to prediction button -->
                    <div class="mt-2 flex items-center gap-2">
                      <button class="text-[10px] px-3 py-1 rounded bg-sky-600 hover:bg-sky-500 text-white" @click="applyWheelSpringRate()">å¥—ç”¨å‡ç´šå¾Œå½ˆç°§ç‡åˆ°é æ¸¬</button>
                      <button class="text-[10px] px-3 py-1 rounded bg-slate-700 hover:bg-slate-600 text-slate-300" @click="resetWheelUpgrade()">æ¢å¾© OEM</button>
                    </div>
                  </div>
                </div>
              </template>
            </div>
          </div>
        </div>

        <!-- Tier 1: Simple tire selector -->
        <div x-show="tier === 1" x-transition>
          <div class="section-title"><span class="badge badge-p">è¼ªèƒ</span> å¿«é€Ÿé¸æ“‡</div>
          <div class="mb-2">
            <div class="flex items-center gap-2 mb-1">
              <label class="text-xs text-slate-400">è¼ªèƒå‹è™Ÿ</label>
              <button class="text-[10px] px-2 py-0.5 rounded bg-slate-700 text-slate-300" @click="tire.sameFrontRear=!tire.sameFrontRear" x-text="tire.sameFrontRear?'å‰å¾Œç›¸åŒ':'å‰å¾Œä¸åŒ'"></button>
            </div>
            <div :class="tire.sameFrontRear?'':'grid-2'">
              <div>
                <label x-show="!tire.sameFrontRear" class="text-[10px] text-slate-500">å‰è¼ª</label>
                <select x-model="tire.front_compound" @change="onTireSelect('front')" class="w-full mt-0.5 text-xs">
                  <optgroup label="â”€â”€ Semi-Slick â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='semi_slick')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh + ' (' + t.treadwear + 'TW)'"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ Sport â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='sport')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh + ' (' + t.treadwear + 'TW)'"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ Race â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='race')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh"></option>
                    </template>
                  </optgroup>
                </select>
              </div>
              <div x-show="!tire.sameFrontRear">
                <label class="text-[10px] text-slate-500">å¾Œè¼ª</label>
                <select x-model="tire.rear_compound" @change="onTireSelect('rear')" class="w-full mt-0.5 text-xs">
                  <optgroup label="â”€â”€ Semi-Slick â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='semi_slick')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh + ' (' + t.treadwear + 'TW)'"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ Sport â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='sport')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh + ' (' + t.treadwear + 'TW)'"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ Race â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='race')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh"></option>
                    </template>
                  </optgroup>
                </select>
              </div>
            </div>
            <!-- Tire info badges (compact) -->
            <div x-show="selectedTireInfo" class="flex flex-wrap gap-1.5 mt-1.5 text-[10px]">
              <span class="px-1.5 py-0.5 rounded bg-pink-900/20 text-pink-400" x-text="'æŠ“åœ°åŠ›: ' + ((selectedTireInfo?.peak_grip||1)*100).toFixed(0) + '%'"></span>
              <span class="px-1.5 py-0.5 rounded bg-sky-900/20 text-sky-400" x-text="'æœ€ä½³æº«åº¦: ' + (selectedTireInfo?.optimal_temp||'?') + 'Â°C'"></span>
              <span x-show="selectedTireInfo?.notes" class="px-1.5 py-0.5 rounded bg-yellow-900/20 text-yellow-400" x-text="selectedTireInfo?.notes"></span>
            </div>
          </div>
          <div class="text-[10px] text-slate-500 mt-1 mb-1">å¿«é€Ÿæ¨¡å¼ï¼šè‡ªå‹•ä½¿ç”¨å»ºè­°èƒå£“å’Œé è¨­æº«åº¦ã€‚åˆ‡æ›è‡³ Tier 2 å¯æ‰‹å‹•èª¿æ•´å››è§’æº«å£“ã€‚</div>
        </div>

        <!-- Tier 2+: Full tire controls -->
        <div x-show="tier >= 2" x-transition>
          <div class="section-title"><span class="badge badge-p">Tier 2</span> è¼ªèƒæ¢ä»¶ï¼ˆè©³ç´°ï¼‰</div>
          <div class="grid-4 text-sm mb-2">
            <div class="text-center text-xs text-slate-500">FL</div>
            <div class="text-center text-xs text-slate-500">FR</div>
            <div class="text-center text-xs text-slate-500">RL</div>
            <div class="text-center text-xs text-slate-500">RR</div>
          </div>
          <div class="text-xs text-slate-400 mb-1">èƒæº« (Â°C)</div>
          <div class="grid-4 mb-2">
            <input type="number" x-model.number="tire.fl_temp" class="text-center">
            <input type="number" x-model.number="tire.fr_temp" class="text-center">
            <input type="number" x-model.number="tire.rl_temp" class="text-center">
            <input type="number" x-model.number="tire.rr_temp" class="text-center">
          </div>
          <div class="flex items-center gap-2 mb-1">
            <span class="text-xs text-slate-400">èƒå£“</span>
            <div class="flex rounded overflow-hidden border border-white/10 text-[10px]">
              <button class="px-2 py-0.5 transition-colors" :class="pressureUnit==='psi'?'bg-sky-500 text-white':'text-slate-400'" @click="switchPressureUnit('psi')">PSI</button>
              <button class="px-2 py-0.5 transition-colors" :class="pressureUnit==='bar'?'bg-sky-500 text-white':'text-slate-400'" @click="switchPressureUnit('bar')">bar</button>
              <button class="px-2 py-0.5 transition-colors" :class="pressureUnit==='kpa'?'bg-sky-500 text-white':'text-slate-400'" @click="switchPressureUnit('kpa')">kPa</button>
            </div>
          </div>
          <div class="grid-4 mb-2">
            <input type="number" :value="fromBar(tire.fl_pressure)" @input="tire.fl_pressure=toBar($event.target.value)" :step="pressureStep" class="text-center">
            <input type="number" :value="fromBar(tire.fr_pressure)" @input="tire.fr_pressure=toBar($event.target.value)" :step="pressureStep" class="text-center">
            <input type="number" :value="fromBar(tire.rl_pressure)" @input="tire.rl_pressure=toBar($event.target.value)" :step="pressureStep" class="text-center">
            <input type="number" :value="fromBar(tire.rr_pressure)" @input="tire.rr_pressure=toBar($event.target.value)" :step="pressureStep" class="text-center">
          </div>
          <!-- Tire selector -->
          <div class="mb-2">
            <div class="flex items-center gap-2 mb-1">
              <label class="text-xs text-slate-400">è¼ªèƒå‹è™Ÿ</label>
              <button class="text-[10px] px-2 py-0.5 rounded bg-slate-700 text-slate-300" @click="tire.sameFrontRear=!tire.sameFrontRear" x-text="tire.sameFrontRear?'å‰å¾Œç›¸åŒ':'å‰å¾Œä¸åŒ'"></button>
            </div>
            <div :class="tire.sameFrontRear?'':'grid-2'">
              <div>
                <label x-show="!tire.sameFrontRear" class="text-[10px] text-slate-500">å‰è¼ª</label>
                <select x-model="tire.front_compound" @change="onTireSelect('front')" class="w-full mt-0.5 text-xs">
                  <optgroup label="â”€â”€ è³½é“æ—¥æ€§èƒ½èƒ Semi-Slick â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='semi_slick')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh + ' (' + t.treadwear + 'TW)'"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ é«˜æ€§èƒ½è¡—èƒ Sport â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='sport')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh + ' (' + t.treadwear + 'TW)'"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ è³½è»Šå…‰é ­èƒ Race â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='race')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ é€šç”¨é…æ–¹ (èˆŠç‰ˆ) â”€â”€">
                    <option value="soft">Soft</option><option value="medium">Medium</option><option value="hard">Hard</option><option value="wet">Wet</option>
                  </optgroup>
                </select>
              </div>
              <div x-show="!tire.sameFrontRear">
                <label class="text-[10px] text-slate-500">å¾Œè¼ª</label>
                <select x-model="tire.rear_compound" @change="onTireSelect('rear')" class="w-full mt-0.5 text-xs">
                  <optgroup label="â”€â”€ è³½é“æ—¥æ€§èƒ½èƒ Semi-Slick â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='semi_slick')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh + ' (' + t.treadwear + 'TW)'"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ é«˜æ€§èƒ½è¡—èƒ Sport â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='sport')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh + ' (' + t.treadwear + 'TW)'"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ è³½è»Šå…‰é ­èƒ Race â”€â”€">
                    <template x-for="t in tireOptions.filter(t=>t.category==='race')" :key="t.id">
                      <option :value="t.id" x-text="t.name_zh"></option>
                    </template>
                  </optgroup>
                  <optgroup label="â”€â”€ é€šç”¨é…æ–¹ (èˆŠç‰ˆ) â”€â”€">
                    <option value="soft">Soft</option><option value="medium">Medium</option><option value="hard">Hard</option><option value="wet">Wet</option>
                  </optgroup>
                </select>
              </div>
            </div>
            <!-- Tire info badges -->
            <div x-show="selectedTireInfo" class="flex flex-wrap gap-1.5 mt-1.5 text-[10px]">
              <span class="px-1.5 py-0.5 rounded bg-pink-900/20 text-pink-400" x-text="'æŠ“åœ°åŠ›: ' + ((selectedTireInfo?.peak_grip||1)*100).toFixed(0) + '%'"></span>
              <span class="px-1.5 py-0.5 rounded bg-sky-900/20 text-sky-400" x-text="'æœ€ä½³æº«åº¦: ' + (selectedTireInfo?.optimal_temp||'?') + 'Â°C Â±' + (selectedTireInfo?.temp_window||'?')"></span>
              <span class="px-1.5 py-0.5 rounded bg-green-900/20 text-green-400" x-text="'å»ºè­°å‰èƒå£“: ' + fromBar(selectedTireInfo?.optimal_pressure_front_bar||1.9) + ' ' + pressureUnit.toUpperCase()"></span>
              <span class="px-1.5 py-0.5 rounded bg-green-900/20 text-green-400" x-text="'å»ºè­°å¾Œèƒå£“: ' + fromBar(selectedTireInfo?.optimal_pressure_rear_bar||1.9) + ' ' + pressureUnit.toUpperCase()"></span>
              <span x-show="selectedTireInfo?.notes" class="px-1.5 py-0.5 rounded bg-yellow-900/20 text-yellow-400" x-text="selectedTireInfo?.notes"></span>
            </div>
          </div>
          <!-- Tire width -->
          <div class="grid-2 mb-1">
            <div>
              <label class="text-xs text-slate-400">å‰èƒå¯¬ (mm)</label>
              <select x-model.number="tire.front_tire_width" class="w-full mt-1 text-xs">
                <option value="0">-- ä¸æŒ‡å®š --</option>
                <template x-for="w in availableWidthsFront" :key="w">
                  <option :value="w" x-text="w + ' mm'"></option>
                </template>
              </select>
            </div>
            <div>
              <label class="text-xs text-slate-400">å¾Œèƒå¯¬ (mm)</label>
              <select x-model.number="tire.rear_tire_width" class="w-full mt-1 text-xs">
                <option value="0">-- ä¸æŒ‡å®š --</option>
                <template x-for="w in availableWidthsRear" :key="w">
                  <option :value="w" x-text="w + ' mm'"></option>
                </template>
              </select>
            </div>
          </div>
          <div x-show="tire.front_tire_width > 0 || tire.rear_tire_width > 0" class="text-[10px] text-slate-500 mb-1">
            èƒå¯¬æ•ˆæœ: å‰ <span class="text-slate-300" x-text="tire.front_tire_width > 0 ? (Math.sqrt(tire.front_tire_width/245)*100).toFixed(1)+'%' : '-'"></span>
            / å¾Œ <span class="text-slate-300" x-text="tire.rear_tire_width > 0 ? (Math.sqrt(tire.rear_tire_width/245)*100).toFixed(1)+'%' : '-'"></span>
            (ä»¥ 245mm ç‚ºåŸºæº– 100%)
          </div>

          <!-- Tire Pressure Management èƒå£“ç®¡ç† -->
          <div class="card2 p-3 mt-3">
            <div class="flex items-center justify-between mb-2">
              <div class="text-xs font-semibold text-pink-400 flex items-center gap-1">
                <span>èƒå£“ç®¡ç†</span>
                <span class="text-[10px] text-slate-500">å†·èƒå£“ â†’ è·‘åœˆ â†’ é‡æ¸¬ç†±èƒå£“</span>
              </div>
              <button class="text-[10px] px-2 py-0.5 rounded bg-slate-700 text-slate-300" @click="tpm.show=!tpm.show" x-text="tpm.show?'æ”¶èµ·':'å±•é–‹'"></button>
            </div>
            <div x-show="tpm.show" x-transition>
              <!-- Step 1: Cold pressure -->
              <div class="mb-3">
                <div class="text-xs text-slate-400 mb-1">â‘  å‡ºå ´å‰å†·èƒå£“ <span class="text-slate-500" x-text="'(' + pressureUnit.toUpperCase() + ')'"></span></div>
                <div class="grid-4">
                  <input type="number" :value="fromBar(tpm.cold_fl)" @input="tpm.cold_fl=toBar($event.target.value)" :step="pressureStep" class="text-center text-xs">
                  <input type="number" :value="fromBar(tpm.cold_fr)" @input="tpm.cold_fr=toBar($event.target.value)" :step="pressureStep" class="text-center text-xs">
                  <input type="number" :value="fromBar(tpm.cold_rl)" @input="tpm.cold_rl=toBar($event.target.value)" :step="pressureStep" class="text-center text-xs">
                  <input type="number" :value="fromBar(tpm.cold_rr)" @input="tpm.cold_rr=toBar($event.target.value)" :step="pressureStep" class="text-center text-xs">
                </div>
              </div>
              <!-- Step 2: How many laps / ambient -->
              <div class="grid grid-cols-3 gap-2 mb-3 text-xs">
                <div>
                  <label class="text-slate-400">è·‘äº†å¹¾åœˆ</label>
                  <input type="number" x-model.number="tpm.laps" class="w-full mt-1 text-center" min="0" step="1">
                </div>
                <div>
                  <label class="text-slate-400">å¤–æ°£æº« (Â°C)</label>
                  <input type="number" x-model.number="tpm.ambient_temp" class="w-full mt-1 text-center" step="1">
                </div>
                <div>
                  <label class="text-slate-400">è·¯é¢æº«åº¦ (Â°C)</label>
                  <input type="number" x-model.number="tpm.track_temp" class="w-full mt-1 text-center" step="1">
                </div>
              </div>
              <!-- Step 3: Measured hot pressure -->
              <div class="mb-3">
                <div class="text-xs text-slate-400 mb-1">â‘¢ é€²ç«™é‡æ¸¬ç†±èƒå£“ <span class="text-slate-500" x-text="'(' + pressureUnit.toUpperCase() + ')'"></span></div>
                <div class="grid-4">
                  <input type="number" :value="fromBar(tpm.hot_fl)" @input="tpm.hot_fl=toBar($event.target.value)" :step="pressureStep" class="text-center text-xs">
                  <input type="number" :value="fromBar(tpm.hot_fr)" @input="tpm.hot_fr=toBar($event.target.value)" :step="pressureStep" class="text-center text-xs">
                  <input type="number" :value="fromBar(tpm.hot_rl)" @input="tpm.hot_rl=toBar($event.target.value)" :step="pressureStep" class="text-center text-xs">
                  <input type="number" :value="fromBar(tpm.hot_rr)" @input="tpm.hot_rr=toBar($event.target.value)" :step="pressureStep" class="text-center text-xs">
                </div>
              </div>
              <!-- Target hot pressure -->
              <div class="mb-3">
                <div class="text-xs text-slate-400 mb-1">ç›®æ¨™ç†±èƒå£“ <span class="text-slate-500" x-text="'(' + pressureUnit.toUpperCase() + ')'"></span></div>
                <div class="grid-2">
                  <div class="flex items-center gap-1">
                    <span class="text-xs text-slate-500 w-6">å‰</span>
                    <input type="number" :value="fromBar(tpm.target_front)" @input="tpm.target_front=toBar($event.target.value)" :step="pressureStep" class="flex-1 text-center text-xs">
                  </div>
                  <div class="flex items-center gap-1">
                    <span class="text-xs text-slate-500 w-6">å¾Œ</span>
                    <input type="number" :value="fromBar(tpm.target_rear)" @input="tpm.target_rear=toBar($event.target.value)" :step="pressureStep" class="flex-1 text-center text-xs">
                  </div>
                </div>
              </div>
              <button class="btn btn-sm w-full" style="background:var(--pink);color:#0f172a" @click="analyzePressure()">åˆ†æèƒå£“</button>

              <!-- Analysis results -->
              <div x-show="tpm.result" x-transition class="mt-3 space-y-2">
                <!-- Rise per corner -->
                <div class="text-xs text-slate-400 mb-1">å†·â†’ç†± å‡å£“é‡</div>
                <div class="grid-4 text-center text-xs">
                  <div class="corner-box"><div class="val text-sm" :class="tpm.result?.rise_color?.fl" x-text="tpm.result?.rise_display?.fl"></div><div class="lbl">FL</div></div>
                  <div class="corner-box"><div class="val text-sm" :class="tpm.result?.rise_color?.fr" x-text="tpm.result?.rise_display?.fr"></div><div class="lbl">FR</div></div>
                  <div class="corner-box"><div class="val text-sm" :class="tpm.result?.rise_color?.rl" x-text="tpm.result?.rise_display?.rl"></div><div class="lbl">RL</div></div>
                  <div class="corner-box"><div class="val text-sm" :class="tpm.result?.rise_color?.rr" x-text="tpm.result?.rise_display?.rr"></div><div class="lbl">RR</div></div>
                </div>
                <!-- vs Target -->
                <div class="text-xs text-slate-400">vs ç›®æ¨™ç†±èƒå£“</div>
                <div class="grid-4 text-center text-xs">
                  <div class="corner-box"><div class="val text-sm" :class="tpm.result?.vs_color?.fl" x-text="tpm.result?.vs_display?.fl"></div><div class="lbl">FL</div></div>
                  <div class="corner-box"><div class="val text-sm" :class="tpm.result?.vs_color?.fr" x-text="tpm.result?.vs_display?.fr"></div><div class="lbl">FR</div></div>
                  <div class="corner-box"><div class="val text-sm" :class="tpm.result?.vs_color?.rl" x-text="tpm.result?.vs_display?.rl"></div><div class="lbl">RL</div></div>
                  <div class="corner-box"><div class="val text-sm" :class="tpm.result?.vs_color?.rr" x-text="tpm.result?.vs_display?.rr"></div><div class="lbl">RR</div></div>
                </div>
                <!-- Suggested cold for next stint -->
                <div class="text-xs text-slate-400">å»ºè­°ä¸‹æ¬¡å†·èƒå£“ (é”åˆ°ç›®æ¨™ç†±èƒå£“)</div>
                <div class="grid-4 text-center text-xs">
                  <div class="corner-box"><div class="val text-sm text-green-400" x-text="tpm.result?.suggest_display?.fl"></div><div class="lbl">FL</div></div>
                  <div class="corner-box"><div class="val text-sm text-green-400" x-text="tpm.result?.suggest_display?.fr"></div><div class="lbl">FR</div></div>
                  <div class="corner-box"><div class="val text-sm text-green-400" x-text="tpm.result?.suggest_display?.rl"></div><div class="lbl">RL</div></div>
                  <div class="corner-box"><div class="val text-sm text-green-400" x-text="tpm.result?.suggest_display?.rr"></div><div class="lbl">RR</div></div>
                </div>
                <!-- Advice -->
                <template x-for="msg in tpm.result?.advice||[]" :key="msg">
                  <div class="text-xs px-2 py-1.5 rounded" style="background:rgba(244,114,182,.06);border:1px solid rgba(244,114,182,.12)" x-text="msg"></div>
                </template>
                <!-- Apply hot pressure to prediction -->
                <button class="btn btn-sm w-full mt-1" style="background:var(--accent);color:#0f172a" @click="applyHotPressure()">å°‡ç†±èƒå£“å¥—ç”¨è‡³é æ¸¬</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Tier 3: Advanced -->
        <div x-show="tier >= 3" x-transition>
          <div class="section-title"><span class="badge badge-g">Tier 3</span> å››è§’é‡é‡ / ç©ºåŠ› / Damper / å¹¾ä½•</div>

          <!-- Corner weights -->
          <div class="text-xs text-slate-400 mb-1">å››è§’é‡é‡ (kg)</div>
          <div class="grid-4 mb-3">
            <div class="text-center"><input type="number" x-model.number="adv.fl_weight" class="w-full text-center" step="0.5"><div class="text-[10px] text-slate-500">FL</div></div>
            <div class="text-center"><input type="number" x-model.number="adv.fr_weight" class="w-full text-center" step="0.5"><div class="text-[10px] text-slate-500">FR</div></div>
            <div class="text-center"><input type="number" x-model.number="adv.rl_weight" class="w-full text-center" step="0.5"><div class="text-[10px] text-slate-500">RL</div></div>
            <div class="text-center"><input type="number" x-model.number="adv.rr_weight" class="w-full text-center" step="0.5"><div class="text-[10px] text-slate-500">RR</div></div>
          </div>

          <!-- Aero -->
          <div class="grid-2 mb-3 text-sm">
            <div><label class="text-xs text-slate-400">è»Šé€Ÿ (km/h)</label><input type="number" x-model.number="adv.speed_kmh" class="w-full mt-1"></div>
            <div><label class="text-xs text-slate-400">æŠ•å½±é¢ç© (mÂ²)</label><input type="number" x-model.number="adv.frontal_area" class="w-full mt-1" step="0.1"></div>
            <div><label class="text-xs text-slate-400">å‰ä¸‹å£“åŠ›ä¿‚æ•¸ CzF</label><input type="number" x-model.number="adv.front_downforce_coeff" class="w-full mt-1" step="0.1"></div>
            <div><label class="text-xs text-slate-400">å¾Œä¸‹å£“åŠ›ä¿‚æ•¸ CzR</label><input type="number" x-model.number="adv.rear_downforce_coeff" class="w-full mt-1" step="0.1"></div>
          </div>

          <!-- Damper (hide when street mode has its own damper section) -->
          <div x-show="!streetMode || !streetCar || !streetCarDetail?.damper_adjustable" class="grid-4 mb-3 text-sm">
            <div><label class="text-xs text-slate-400">å‰ Bump (kgf)</label><input type="number" x-model.number="adv.front_bump_force" class="w-full mt-1"></div>
            <div><label class="text-xs text-slate-400">å‰ Rebound</label><input type="number" x-model.number="adv.front_rebound_force" class="w-full mt-1"></div>
            <div><label class="text-xs text-slate-400">å¾Œ Bump (kgf)</label><input type="number" x-model.number="adv.rear_bump_force" class="w-full mt-1"></div>
            <div><label class="text-xs text-slate-400">å¾Œ Rebound</label><input type="number" x-model.number="adv.rear_rebound_force" class="w-full mt-1"></div>
          </div>

          <!-- Geometry -->
          <div class="grid-4 text-sm">
            <div><label class="text-xs text-slate-400">å‰ Camber (Â°)</label><input type="number" x-model.number="adv.front_camber_deg" class="w-full mt-1" step="0.1"></div>
            <div><label class="text-xs text-slate-400">å¾Œ Camber (Â°)</label><input type="number" x-model.number="adv.rear_camber_deg" class="w-full mt-1" step="0.1"></div>
            <div><label class="text-xs text-slate-400">å‰ Toe (Â°)</label><input type="number" x-model.number="adv.front_toe_deg" class="w-full mt-1" step="0.1"></div>
            <div><label class="text-xs text-slate-400">å¾Œ Toe (Â°)</label><input type="number" x-model.number="adv.rear_toe_deg" class="w-full mt-1" step="0.1"></div>
          </div>

          <!-- Longitudinal G-force -->
          <div class="grid-2 mt-3 text-sm">
            <div><label class="text-xs text-slate-400">ç…è»Š G åŠ›</label><input type="number" x-model.number="adv.braking_g" class="w-full mt-1" step="0.1" min="0" max="3"></div>
            <div><label class="text-xs text-slate-400">åŠ é€Ÿ G åŠ›</label><input type="number" x-model.number="adv.accel_g" class="w-full mt-1" step="0.1" min="0" max="2"></div>
          </div>
          <div class="text-[10px] text-slate-500 mt-1">è¼¸å…¥ç…è»Š/åŠ é€Ÿ G åŠ›è¨ˆç®—ç¸±å‘è·é‡è½‰ç§»ï¼ˆ0 = ä¸è¨ˆç®—ï¼‰</div>
        </div>

        <div class="flex gap-2 mt-2">
          <button class="btn btn-primary flex-1" @click="runPrediction()">è¨ˆç®—é æ¸¬</button>
          <button class="btn flex-1" style="background:var(--yellow);color:#0f172a" @click="setBaseline()" :disabled="!result" x-text="baseline ? 'é‡æ–°æ­¸é›¶' : 'æ­¸é›¶ (è¨­åŸºæº–)'"></button>
        </div>
        <div x-show="baseline" class="mt-2 text-xs px-3 py-2 rounded-lg" style="background:rgba(250,204,21,.08);border:1px solid rgba(250,204,21,.15)">
          <div class="flex items-center justify-between">
            <span class="text-yellow-300 font-semibold">åŸºæº–å·²é–å®š</span>
            <button class="text-slate-400 hover:text-red-400 text-xs" @click="clearBaseline()">æ¸…é™¤åŸºæº–</button>
          </div>
          <div class="text-slate-400 mt-1" x-text="'Tier ' + baseline?.tier + ' | USG åŸºæº–: ' + (baseline?.baselineUSG?.toFixed(2) ?? '?')"></div>
        </div>
      </div>

      <!-- RIGHT: Results -->
      <div class="space-y-4">
        <div x-show="result">
          <!-- Delta display (when baseline is set) -->
          <div x-show="baseline && deltaResult" class="card2 p-4 mb-4" style="background:rgba(250,204,21,.06);border:1px solid rgba(250,204,21,.15)">
            <div class="text-center">
              <div class="text-xs text-yellow-400 mb-1">ç›¸å°åŸºæº–è®ŠåŒ–</div>
              <div class="text-2xl font-bold" :class="deltaResult?.delta_us > 1.5 ? 'text-red-400' : deltaResult?.delta_us < -1.5 ? 'text-sky-400' : 'text-green-400'">
                <span x-text="deltaResult?.delta_tendency_zh"></span>
              </div>
              <div class="text-xs text-slate-400 mt-1">
                USG è®ŠåŒ–: <span class="font-mono font-bold" :class="deltaResult?.delta_us > 0 ? 'text-red-300' : deltaResult?.delta_us < 0 ? 'text-sky-300' : 'text-slate-300'" x-text="(deltaResult?.delta_us > 0 ? '+' : '') + deltaResult?.delta_us?.toFixed(2)"></span>
              </div>
            </div>
            <div class="relative mt-3 mb-5">
              <div class="h-6 rounded-full" style="background:linear-gradient(90deg,#38bdf8 0%,#334155 45%,#facc15 50%,#334155 55%,#ef4444 100%)"></div>
              <div class="absolute top-0 w-1 h-6 bg-yellow-400 rounded" style="left:50%;transform:translateX(-50%)" title="åŸºæº–"></div>
              <div class="absolute top-0 w-3 h-6 bg-white rounded shadow" :style="'left:' + (50 + (deltaResult?.rel_norm||0)*45) + '%;transform:translateX(-50%)'" title="ç›®å‰"></div>
              <div class="flex justify-between text-[10px] text-slate-500 mt-1">
                <span>æ›´å OS</span>
                <span class="text-yellow-500">åŸºæº–</span>
                <span>æ›´å US</span>
              </div>
            </div>
            <!-- Tier 3: entry/exit delta -->
            <div x-show="tier===3 && deltaResult?.entry_delta !== undefined" class="grid grid-cols-3 gap-2 text-xs mt-2">
              <div class="text-center"><span class="text-slate-500">å…¥å½</span><br><span class="font-bold" :class="deltaResult?.entry_delta > 0 ? 'text-red-300' : 'text-sky-300'" x-text="(deltaResult?.entry_delta > 0 ? '+' : '') + deltaResult?.entry_delta?.toFixed(2)"></span></div>
              <div class="text-center"><span class="text-slate-500">å®šå¸¸</span><br><span class="font-bold" :class="deltaResult?.delta_us > 0 ? 'text-red-300' : 'text-sky-300'" x-text="(deltaResult?.delta_us > 0 ? '+' : '') + deltaResult?.delta_us?.toFixed(2)"></span></div>
              <div class="text-center"><span class="text-slate-500">å‡ºå½</span><br><span class="font-bold" :class="deltaResult?.exit_delta > 0 ? 'text-red-300' : 'text-sky-300'" x-text="(deltaResult?.exit_delta > 0 ? '+' : '') + deltaResult?.exit_delta?.toFixed(2)"></span></div>
            </div>
          </div>

          <!-- Main gauge -->
          <div class="card2 p-5 mb-4">
            <div class="text-center mb-3">
              <span class="text-2xl font-bold" :class="resultColor" x-text="resultLabel"></span>
              <div class="text-xs text-slate-500 mt-1" x-text="'Understeer Gradient: ' + resultGradient"></div>
            </div>
            <div class="relative mb-6">
              <div class="gauge-bar"></div>
              <div class="gauge-needle" :style="'left:' + gaugePosition + '%'"></div>
              <template x-if="baseline"><div class="absolute top-0 w-1 h-full bg-yellow-400 opacity-60 rounded" :style="'left:' + baselineGaugePos + '%'" title="åŸºæº–ä½ç½®"></div></template>
              <div class="gauge-label" style="left:5%">OS</div>
              <div class="gauge-label" style="left:50%">Neutral</div>
              <div class="gauge-label" style="left:95%">US</div>
            </div>
            <!-- Tier 3: entry / steady / exit -->
            <div x-show="tier===3 && result?.prediction" class="grid grid-cols-3 gap-3 mt-4">
              <div class="card2 p-3 text-center">
                <div class="text-xs text-slate-500 mb-1">å…¥å½ Turn-In</div>
                <div class="font-bold text-sm" :class="tendencyColor(result?.prediction?.turn_entry?.tendency)" x-text="result?.prediction?.turn_entry?.tendency_zh"></div>
                <div class="text-xs text-slate-500" x-text="result?.prediction?.turn_entry?.understeer_gradient"></div>
              </div>
              <div class="card2 p-3 text-center">
                <div class="text-xs text-slate-500 mb-1">å®šå¸¸ Steady</div>
                <div class="font-bold text-sm" :class="tendencyColor(result?.prediction?.steady_state?.tendency)" x-text="result?.prediction?.steady_state?.tendency_zh"></div>
                <div class="text-xs text-slate-500" x-text="result?.prediction?.steady_state?.understeer_gradient"></div>
              </div>
              <div class="card2 p-3 text-center">
                <div class="text-xs text-slate-500 mb-1">å‡ºå½ Exit</div>
                <div class="font-bold text-sm" :class="tendencyColor(result?.prediction?.turn_exit?.tendency)" x-text="result?.prediction?.turn_exit?.tendency_zh"></div>
                <div class="text-xs text-slate-500" x-text="result?.prediction?.turn_exit?.understeer_gradient"></div>
              </div>
            </div>
          </div>

          <!-- Roll Stiffness -->
          <div class="card2 p-4 mb-4">
            <div class="text-xs text-slate-400 mb-2">Roll Stiffness Distribution</div>
            <div class="flex items-center gap-2 mb-1">
              <span class="text-xs w-16 text-right text-sky-400" x-text="'F ' + (result?.roll_stiffness_dist_front || result?.mechanical?.roll_stiffness_dist_front || 50) + '%'"></span>
              <div class="flex-1 h-5 rounded overflow-hidden flex">
                <div class="bg-sky-500 transition-all" :style="'width:' + (result?.roll_stiffness_dist_front || result?.mechanical?.roll_stiffness_dist_front || 50) + '%'"></div>
                <div class="bg-pink-500 flex-1"></div>
              </div>
              <span class="text-xs w-16 text-pink-400" x-text="'R ' + (100-(result?.roll_stiffness_dist_front || result?.mechanical?.roll_stiffness_dist_front || 50)).toFixed(1) + '%'"></span>
            </div>
            <div class="flex justify-between text-xs text-slate-500">
              <span x-text="'å‰: ' + (result?.front_roll_stiffness_total || result?.mechanical?.roll_stiffness_front || 0) + ' Nm/deg'"></span>
              <span x-text="'å¾Œ: ' + (result?.rear_roll_stiffness_total || result?.mechanical?.roll_stiffness_rear || 0) + ' Nm/deg'"></span>
            </div>
            <div class="text-xs text-slate-500 mt-1" x-text="'éœæ…‹è·é‡: F ' + (result?.weight_front_pct || result?.mechanical?.weight_front_pct || 50) + '% | LLTD å‰: ' + (result?.lltd_front || result?.mechanical?.lltd_front || 50) + '%'"></div>
          </div>

          <!-- Tire grip (all tiers now have tire data) -->
          <div x-show="result?.tire_grip" class="card2 p-4 mb-4">
            <div class="text-xs text-slate-400 mb-2">è¼ªèƒæŠ“åœ°åŠ›</div>
            <div class="grid-4">
              <div class="corner-box"><div class="val" :class="gripColor(result?.tire_grip?.fl)" x-text="(result?.tire_grip?.fl*100).toFixed(1)+'%'"></div><div class="lbl">FL</div></div>
              <div class="corner-box"><div class="val" :class="gripColor(result?.tire_grip?.fr)" x-text="(result?.tire_grip?.fr*100).toFixed(1)+'%'"></div><div class="lbl">FR</div></div>
              <div class="corner-box"><div class="val" :class="gripColor(result?.tire_grip?.rl)" x-text="(result?.tire_grip?.rl*100).toFixed(1)+'%'"></div><div class="lbl">RL</div></div>
              <div class="corner-box"><div class="val" :class="gripColor(result?.tire_grip?.rr)" x-text="(result?.tire_grip?.rr*100).toFixed(1)+'%'"></div><div class="lbl">RR</div></div>
            </div>
            <div class="flex justify-between mt-2 text-xs text-slate-500">
              <span x-text="'å‰è»¸å¹³å‡: ' + ((result?.tire_grip?.front_avg||0)*100).toFixed(1) + '%'"></span>
              <span x-text="'å¾Œè»¸å¹³å‡: ' + ((result?.tire_grip?.rear_avg||0)*100).toFixed(1) + '%'"></span>
              <span x-text="'å‰/å¾Œæ¯”: ' + (result?.tire_grip?.grip_ratio_f_r||1).toFixed(3)"></span>
            </div>
            <div x-show="result?.tire_grip?.front_width_mm > 0 || result?.tire_grip?.rear_width_mm > 0" class="text-[10px] text-slate-500 mt-1">
              èƒå¯¬ä¿®æ­£: å‰ <span class="text-slate-300" x-text="(result?.tire_grip?.front_width_factor||1).toFixed(3) + 'x (' + (result?.tire_grip?.front_width_mm||0) + 'mm)'"></span>
              / å¾Œ <span class="text-slate-300" x-text="(result?.tire_grip?.rear_width_factor||1).toFixed(3) + 'x (' + (result?.tire_grip?.rear_width_mm||0) + 'mm)'"></span>
            </div>
          </div>

          <!-- Ride Quality (all tiers) -->
          <div x-show="result?.ride_frequency || result?.mechanical?.ride_frequency" class="card2 p-4 mb-4">
            <div class="text-xs text-slate-400 mb-2">æ‡¸åŠå›ºæœ‰é »ç‡ Ride Frequency</div>
            <template x-if="(result?.ride_frequency || result?.mechanical?.ride_frequency)">
              <div>
                <div class="grid-2 mb-2">
                  <div class="corner-box">
                    <div class="val text-sky-300" x-text="(result?.ride_frequency || result?.mechanical?.ride_frequency)?.front_hz + ' Hz'"></div>
                    <div class="lbl">å‰è»¸</div>
                    <div class="text-[10px] mt-1" :class="{'text-green-400': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.front_category==='street','text-yellow-400': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.front_category==='track','text-red-400': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.front_category==='race','text-slate-500': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.front_category==='comfort'}" x-text="({'comfort':'èˆ’é©','street':'è¡—é“','track':'è³½é“','race':'ç«¶æŠ€'})[(result?.ride_frequency || result?.mechanical?.ride_frequency)?.front_category]"></div>
                  </div>
                  <div class="corner-box">
                    <div class="val text-pink-300" x-text="(result?.ride_frequency || result?.mechanical?.ride_frequency)?.rear_hz + ' Hz'"></div>
                    <div class="lbl">å¾Œè»¸</div>
                    <div class="text-[10px] mt-1" :class="{'text-green-400': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.rear_category==='street','text-yellow-400': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.rear_category==='track','text-red-400': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.rear_category==='race','text-slate-500': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.rear_category==='comfort'}" x-text="({'comfort':'èˆ’é©','street':'è¡—é“','track':'è³½é“','race':'ç«¶æŠ€'})[(result?.ride_frequency || result?.mechanical?.ride_frequency)?.rear_category]"></div>
                  </div>
                </div>
                <div class="text-xs text-slate-500">
                  å‰/å¾Œæ¯”: <span class="font-mono text-slate-300" x-text="(result?.ride_frequency || result?.mechanical?.ride_frequency)?.ratio?.toFixed(3)"></span>
                  <span class="text-[10px] ml-1" :class="{ 'text-green-400': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.ratio >= 0.85 && (result?.ride_frequency || result?.mechanical?.ride_frequency)?.ratio <= 1.15, 'text-yellow-400': (result?.ride_frequency || result?.mechanical?.ride_frequency)?.ratio < 0.85 || (result?.ride_frequency || result?.mechanical?.ride_frequency)?.ratio > 1.15 }" x-text="(result?.ride_frequency || result?.mechanical?.ride_frequency)?.ratio >= 0.85 && (result?.ride_frequency || result?.mechanical?.ride_frequency)?.ratio <= 1.15 ? '(Flat ride ç¯„åœå…§)' : '(åé›¢ Flat ride)'"></span>
                </div>
                <div class="text-xs text-slate-500 mt-1" x-text="'æœ‰æ•ˆè¼ªç‡: å‰ ' + (result?.front_wheel_rate_effective || result?.mechanical?.front_wheel_rate_effective || '?') + ' / å¾Œ ' + (result?.rear_wheel_rate_effective || result?.mechanical?.rear_wheel_rate_effective || '?') + ' N/mm'"></div>
              </div>
            </template>
          </div>

          <!-- LLTD Decomposition (all tiers) -->
          <div x-show="result?.lltd_decomposed || result?.mechanical?.lltd_decomposed" class="card2 p-4 mb-4">
            <div class="text-xs text-slate-400 mb-2">LLTD åˆ†è§£ï¼ˆå¹¾ä½• vs å½ˆæ€§ï¼‰</div>
            <template x-if="(result?.lltd_decomposed || result?.mechanical?.lltd_decomposed)">
              <div>
                <div class="text-xs text-slate-500 mb-1">å¹¾ä½•è½‰ç§»ä½”æ¯”: <span class="font-mono text-slate-300" x-text="(result?.lltd_decomposed || result?.mechanical?.lltd_decomposed)?.geometric_pct_of_total + '%'"></span></div>
                <div class="flex items-center gap-2 mb-2">
                  <span class="text-[10px] w-10 text-right text-yellow-400">å¹¾ä½•</span>
                  <div class="flex-1 h-4 rounded overflow-hidden bg-slate-700">
                    <div class="bg-yellow-500 h-full transition-all" :style="'width:' + (result?.lltd_decomposed || result?.mechanical?.lltd_decomposed)?.geometric_pct_of_total + '%'"></div>
                  </div>
                  <span class="text-[10px] w-10 text-sky-400">å½ˆæ€§</span>
                </div>
                <div class="grid-2 text-xs text-slate-500">
                  <div>å‰ å¹¾ä½•: <span class="text-slate-300" x-text="(result?.lltd_decomposed || result?.mechanical?.lltd_decomposed)?.geometric_front + ' N/g'"></span></div>
                  <div>å‰ å½ˆæ€§: <span class="text-slate-300" x-text="(result?.lltd_decomposed || result?.mechanical?.lltd_decomposed)?.elastic_front + ' N/g'"></span></div>
                  <div>å¾Œ å¹¾ä½•: <span class="text-slate-300" x-text="(result?.lltd_decomposed || result?.mechanical?.lltd_decomposed)?.geometric_rear + ' N/g'"></span></div>
                  <div>å¾Œ å½ˆæ€§: <span class="text-slate-300" x-text="(result?.lltd_decomposed || result?.mechanical?.lltd_decomposed)?.elastic_rear + ' N/g'"></span></div>
                </div>
                <div class="text-xs text-slate-500 mt-1">LLTD å‰: <span class="font-bold text-slate-300" x-text="(result?.lltd_decomposed || result?.mechanical?.lltd_decomposed)?.total_front_pct + '%'"></span></div>
              </div>
            </template>
          </div>

          <!-- Damping Analysis (Tier 3) -->
          <div x-show="tier === 3 && result?.damping" class="card2 p-4 mb-4">
            <div class="text-xs text-slate-400 mb-2">é˜»å°¼åˆ†æ Damping</div>
            <div class="grid-2 mb-2">
              <div class="corner-box">
                <div class="val" :class="{'text-green-400': result?.damping?.front_category==='street','text-yellow-400': result?.damping?.front_category==='track','text-red-400': result?.damping?.front_category==='race','text-slate-400': result?.damping?.front_category==='underdamped'}" x-text="result?.damping?.front_ratio"></div>
                <div class="lbl">å‰ Î¶</div>
                <div class="text-[10px] mt-1" :class="{'text-green-400': result?.damping?.front_category==='street','text-yellow-400': result?.damping?.front_category==='track','text-red-400': result?.damping?.front_category==='race','text-slate-500': result?.damping?.front_category==='underdamped'}" x-text="({'underdamped':'æ¬ é˜»å°¼','street':'è¡—é“','track':'è³½é“','race':'ç«¶æŠ€'})[result?.damping?.front_category]"></div>
              </div>
              <div class="corner-box">
                <div class="val" :class="{'text-green-400': result?.damping?.rear_category==='street','text-yellow-400': result?.damping?.rear_category==='track','text-red-400': result?.damping?.rear_category==='race','text-slate-400': result?.damping?.rear_category==='underdamped'}" x-text="result?.damping?.rear_ratio"></div>
                <div class="lbl">å¾Œ Î¶</div>
                <div class="text-[10px] mt-1" :class="{'text-green-400': result?.damping?.rear_category==='street','text-yellow-400': result?.damping?.rear_category==='track','text-red-400': result?.damping?.rear_category==='race','text-slate-500': result?.damping?.rear_category==='underdamped'}" x-text="({'underdamped':'æ¬ é˜»å°¼','street':'è¡—é“','track':'è³½é“','race':'ç«¶æŠ€'})[result?.damping?.rear_category]"></div>
              </div>
            </div>
            <div class="text-xs text-slate-500">Roll Damping: <span class="font-mono text-slate-300" x-text="result?.damping?.roll_damping_ratio"></span></div>
            <div class="text-[10px] text-slate-600 mt-1">è¡—é“ 0.3-0.5 / è³½é“ 0.6-0.8 / ç«¶æŠ€ 0.8+</div>
          </div>

          <!-- Longitudinal Transfer (Tier 3) -->
          <div x-show="tier === 3 && result?.longitudinal_transfer && (result?.longitudinal_transfer?.braking || result?.longitudinal_transfer?.acceleration)" class="card2 p-4 mb-4">
            <div class="text-xs text-slate-400 mb-2">ç¸±å‘è·é‡è½‰ç§»</div>
            <div x-show="result?.longitudinal_transfer?.braking" class="mb-2">
              <div class="text-xs text-slate-500 mb-1">ç…è»Š</div>
              <div class="flex items-center gap-2">
                <span class="text-xs w-14 text-right text-sky-400" x-text="'F ' + result?.longitudinal_transfer?.braking?.front_pct + '%'"></span>
                <div class="flex-1 h-4 rounded overflow-hidden flex">
                  <div class="bg-sky-500 transition-all" :style="'width:' + result?.longitudinal_transfer?.braking?.front_pct + '%'"></div>
                  <div class="bg-pink-500 flex-1"></div>
                </div>
                <span class="text-xs w-14 text-pink-400" x-text="'R ' + result?.longitudinal_transfer?.braking?.rear_pct + '%'"></span>
              </div>
              <div class="text-[10px] text-slate-500 mt-1" x-text="'è½‰ç§»é‡: ' + result?.longitudinal_transfer?.braking?.transfer_kg + ' kg'"></div>
            </div>
            <div x-show="result?.longitudinal_transfer?.acceleration">
              <div class="text-xs text-slate-500 mb-1">åŠ é€Ÿ</div>
              <div class="flex items-center gap-2">
                <span class="text-xs w-14 text-right text-sky-400" x-text="'F ' + result?.longitudinal_transfer?.acceleration?.front_pct + '%'"></span>
                <div class="flex-1 h-4 rounded overflow-hidden flex">
                  <div class="bg-sky-500 transition-all" :style="'width:' + result?.longitudinal_transfer?.acceleration?.front_pct + '%'"></div>
                  <div class="bg-pink-500 flex-1"></div>
                </div>
                <span class="text-xs w-14 text-pink-400" x-text="'R ' + result?.longitudinal_transfer?.acceleration?.rear_pct + '%'"></span>
              </div>
              <div class="text-[10px] text-slate-500 mt-1" x-text="'è½‰ç§»é‡: ' + result?.longitudinal_transfer?.acceleration?.transfer_kg + ' kg'"></div>
            </div>
          </div>

          <!-- Vehicle Dynamics (Tier 3) -->
          <div x-show="tier === 3 && result?.dynamics" class="card2 p-4 mb-4">
            <div class="text-xs text-slate-400 mb-2">è»Šè¼›å‹•æ…‹ Vehicle Dynamics</div>
            <div class="grid-2 text-xs mb-2">
              <div class="corner-box">
                <div class="val text-sky-300" x-text="result?.dynamics?.slip_angle_front_deg + 'Â°'"></div>
                <div class="lbl">å‰è»¸ Slip Angle</div>
              </div>
              <div class="corner-box">
                <div class="val text-pink-300" x-text="result?.dynamics?.slip_angle_rear_deg + 'Â°'"></div>
                <div class="lbl">å¾Œè»¸ Slip Angle</div>
              </div>
            </div>
            <div class="text-xs text-slate-500 mb-1">
              å…ˆé£½å’Œ: <span class="font-bold" :class="result?.dynamics?.first_saturates==='front' ? 'text-sky-400' : 'text-pink-400'" x-text="result?.dynamics?.first_saturates==='front' ? 'å‰è»¸ â†’ æ¨é ­' : 'å¾Œè»¸ â†’ ç”©å°¾'"></span>
            </div>
            <div x-show="result?.dynamics?.characteristic_speed_kmh" class="text-xs text-slate-500">
              ç‰¹å¾µé€Ÿåº¦: <span class="font-mono text-slate-300" x-text="result?.dynamics?.characteristic_speed_kmh + ' km/h'"></span>
            </div>
            <div class="text-xs text-slate-500">
              Yaw Gain @100: <span class="font-mono text-slate-300" x-text="result?.dynamics?.yaw_gain_at_100kmh + ' rad/s/rad'"></span>
            </div>
          </div>

          <!-- Tier 3: Contribution breakdown -->
          <div x-show="tier === 3 && result?.contribution" class="card2 p-4 mb-4">
            <div class="text-xs text-slate-400 mb-2">å„å› ç´ è²¢ç»ï¼ˆæ­£=US / è² =OSï¼‰</div>
            <canvas id="contributionChart" height="180"></canvas>
          </div>

          <!-- Tier 3: Corner weight / Aero -->
          <div x-show="tier === 3" class="grid-2 mb-4">
            <div class="card2 p-4" x-show="result?.corner_weight">
              <div class="text-xs text-slate-400 mb-2">Corner Weight</div>
              <div class="grid-4 mb-2">
                <div class="corner-box"><div class="val text-sky-300" x-text="result?.corner_weight?.fl"></div><div class="lbl">FL</div></div>
                <div class="corner-box"><div class="val text-sky-300" x-text="result?.corner_weight?.fr"></div><div class="lbl">FR</div></div>
                <div class="corner-box"><div class="val text-pink-300" x-text="result?.corner_weight?.rl"></div><div class="lbl">RL</div></div>
                <div class="corner-box"><div class="val text-pink-300" x-text="result?.corner_weight?.rr"></div><div class="lbl">RR</div></div>
              </div>
              <div class="text-xs text-slate-500">
                <span x-text="'Cross: ' + result?.corner_weight?.cross_weight_pct + '%'"></span> |
                <span x-text="'L/Rå·®: ' + result?.corner_weight?.lr_imbalance_pct + '%'"></span>
              </div>
            </div>
            <div class="card2 p-4" x-show="result?.aero">
              <div class="text-xs text-slate-400 mb-2">ç©ºåŠ›æ•ˆæœ @ <span x-text="result?.aero?.speed_kmh + ' km/h'"></span></div>
              <div class="flex justify-between text-sm mb-1">
                <span>å‰ä¸‹å£“: <span class="font-bold text-sky-400" x-text="result?.aero?.front_downforce_kg + ' kg'"></span></span>
                <span>å¾Œä¸‹å£“: <span class="font-bold text-pink-400" x-text="result?.aero?.rear_downforce_kg + ' kg'"></span></span>
              </div>
              <div class="text-xs text-slate-500" x-text="'ç©ºåŠ›å¹³è¡¡ F' + result?.aero?.aero_balance_front_pct + '% | æœ‰æ•ˆè·é‡ F' + result?.aero?.effective_weight_front_pct + '%'"></div>
              <div class="text-xs text-slate-500" x-text="'ç©ºåŠ› US åç§»: ' + result?.aero?.aero_us_shift"></div>
            </div>
          </div>

          <!-- Tier 3: Corner Weight Diagram + G-G Diagram -->
          <div x-show="tier === 3 && result" class="grid-2 mb-4" x-init="$watch('result', () => { if(tier===3 && result){ $nextTick(()=>{drawCornerWeight();drawGGDiagram()}) } })">
            <div class="card2 p-4" x-show="result?.corner_weight">
              <div class="text-xs text-slate-400 mb-2">é‡é‡åˆ†ä½ˆä¿¯è¦–åœ–</div>
              <canvas id="cwCanvas" width="240" height="200" style="display:block;margin:0 auto"></canvas>
            </div>
            <div class="card2 p-4">
              <div class="text-xs text-slate-400 mb-2">G-G æ‘©æ“¦åœ“</div>
              <canvas id="ggChart" height="200"></canvas>
            </div>
          </div>

          <!-- Warnings -->
          <template x-for="w in (result?.warnings || [])" :key="w">
            <div class="warn mb-2" x-text="w"></div>
          </template>
        </div>

        <div x-show="!result" class="text-center text-slate-500 py-20">
          <div class="text-lg mb-2">è¼¸å…¥åƒæ•¸å¾ŒæŒ‰ã€Œè¨ˆç®—é æ¸¬ã€</div>
          <div class="text-xs">ç³»çµ±å°‡æ ¹æ“šä½ é¸æ“‡çš„ Tier å±¤ç´šè¨ˆç®—è½‰å‘è¶¨å‹¢</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ==================== TAB: èª¿æ ¡å»ºè­° ==================== -->
<div x-show="currentTab==='advisor'" x-transition>
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-xl font-bold">èª¿æ ¡å»ºè­° Setup Advisor</h2>
    <button class="btn btn-primary" @click="runAdvisor()" :disabled="!result">
      <span x-show="!result" class="text-xs">è«‹å…ˆåœ¨ã€Œè½‰å‘é æ¸¬ã€è¨ˆç®—çµæœ</span>
      <span x-show="result">å¾é æ¸¬çµæœåˆ†æ</span>
    </button>
  </div>

  <template x-if="!advisorResult && !result">
    <div class="text-center text-slate-500 py-20">
      <div class="text-4xl mb-4">ğŸ“‹</div>
      <div class="text-lg mb-2">å°šç„¡é æ¸¬çµæœ</div>
      <div class="text-xs">è«‹å…ˆåˆ°ã€Œè½‰å‘é æ¸¬ã€Tab è¼¸å…¥åƒæ•¸ä¸¦è¨ˆç®—ï¼Œå†å›ä¾†æŸ¥çœ‹èª¿æ ¡å»ºè­°</div>
    </div>
  </template>

  <template x-if="advisorResult">
    <div>
      <!-- Summary bar -->
      <div class="card p-4 mb-4 flex items-center gap-6">
        <div class="text-sm font-semibold">åˆ†ææ‘˜è¦</div>
        <div class="flex gap-4 text-xs">
          <span x-show="advisorResult.summary.high>0" class="flex items-center gap-1">ğŸ”´ <span class="font-bold text-red-400" x-text="advisorResult.summary.high"></span> é«˜å„ªå…ˆ</span>
          <span x-show="advisorResult.summary.medium>0" class="flex items-center gap-1">ğŸŸ¡ <span class="font-bold text-yellow-400" x-text="advisorResult.summary.medium"></span> ä¸­å„ªå…ˆ</span>
          <span x-show="advisorResult.summary.low>0" class="flex items-center gap-1">ğŸŸ¢ <span class="font-bold text-green-400" x-text="advisorResult.summary.low"></span> ä½å„ªå…ˆ</span>
        </div>
        <div class="ml-auto text-xs text-slate-500">Tier <span x-text="tier"></span> Â· å…± <span x-text="advisorResult.summary.total"></span> æ¢å»ºè­°</div>
      </div>

      <!-- No issues -->
      <template x-if="advisorResult.suggestions.length===0">
        <div class="text-center text-green-400 py-16">
          <div class="text-4xl mb-4">âœ…</div>
          <div class="text-lg font-semibold">è¨­å®šè‰¯å¥½</div>
          <div class="text-xs text-slate-400 mt-2">ç›®å‰è¨­å®šåœ¨å„é …æŒ‡æ¨™éƒ½åœ¨åˆç†ç¯„åœå…§</div>
        </div>
      </template>

      <!-- Suggestion cards by priority -->
      <template x-for="pri in ['high','medium','low']" :key="pri">
        <div x-show="advisorResult.suggestions.filter(s=>s.priority===pri).length>0" class="mb-4">
          <div class="text-xs font-bold uppercase tracking-wider mb-2" :class="pri==='high'?'text-red-400':pri==='medium'?'text-yellow-400':'text-green-400'" x-text="pri==='high'?'ğŸ”´ é«˜å„ªå…ˆ':pri==='medium'?'ğŸŸ¡ ä¸­å„ªå…ˆ':'ğŸŸ¢ ä½å„ªå…ˆ'"></div>
          <div class="space-y-2">
            <template x-for="(s, idx) in advisorResult.suggestions.filter(s=>s.priority===pri)" :key="idx">
              <div class="card p-4">
                <div class="flex items-start gap-3">
                  <div class="text-lg" x-text="advisorCategoryIcon(s.category)"></div>
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="badge" :class="pri==='high'?'badge-r':pri==='medium'?'badge-y':'badge-g'" x-text="s.category_zh"></span>
                    </div>
                    <div class="text-sm" x-text="s.message"></div>
                    <div x-show="s.suggestion" class="mt-2 text-xs text-sky-400 flex items-start gap-1">
                      <span>ğŸ’¡</span>
                      <span x-text="s.suggestion"></span>
                    </div>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>
      </template>
    </div>
  </template>
</div>

<!-- ==================== TAB: å½ˆç°§è¨ˆç®—å™¨ ==================== -->
<div x-show="currentTab==='spring'" x-transition>
  <h2 class="text-xl font-bold mb-4">å½ˆç°§è¨ˆç®—å™¨ Spring Calculator</h2>

  <div class="grid-2">
    <!-- Left: Frequency â†” Spring Rate -->
    <div class="card p-5">
      <div class="section-title">é »ç‡ â†” å½ˆç°§ç‡äº’ç®—</div>

      <!-- Mode toggle -->
      <div class="flex rounded-lg overflow-hidden border border-white/10 mb-4">
        <button class="flex-1 px-3 py-2 text-xs font-semibold transition-colors" :class="springCalc.mode==='freq_to_spring'?'bg-sky-500 text-white':'bg-transparent text-slate-400'" @click="springCalc.mode='freq_to_spring'">é »ç‡ â†’ å½ˆç°§ç‡</button>
        <button class="flex-1 px-3 py-2 text-xs font-semibold transition-colors" :class="springCalc.mode==='spring_to_freq'?'bg-sky-500 text-white':'bg-transparent text-slate-400'" @click="springCalc.mode='spring_to_freq'">å½ˆç°§ç‡ â†’ é »ç‡</button>
      </div>

      <!-- Inputs -->
      <div class="grid grid-cols-2 gap-3 mb-4">
        <div x-show="springCalc.mode==='freq_to_spring'">
          <label class="text-[10px] text-slate-400 block mb-1">ç›®æ¨™é »ç‡ (Hz)</label>
          <input type="number" step="0.1" x-model.number="springCalc.target_hz" class="w-full">
        </div>
        <div x-show="springCalc.mode==='spring_to_freq'">
          <label class="text-[10px] text-slate-400 block mb-1">å½ˆç°§ç‡ (N/mm)</label>
          <input type="number" step="5" x-model.number="springCalc.spring_rate" class="w-full">
        </div>
        <div>
          <label class="text-[10px] text-slate-400 block mb-1">è§’è½è³ªé‡ (kg)</label>
          <input type="number" step="5" x-model.number="springCalc.corner_mass" class="w-full">
        </div>
        <div>
          <label class="text-[10px] text-slate-400 block mb-1">Motion Ratio</label>
          <input type="number" step="0.05" x-model.number="springCalc.motion_ratio" class="w-full">
        </div>
        <div>
          <label class="text-[10px] text-slate-400 block mb-1">è¼ªèƒå½ˆç°§ç‡ (N/mm)</label>
          <input type="number" step="10" x-model.number="springCalc.tire_spring_rate" class="w-full">
        </div>
      </div>

      <div class="flex gap-2 mb-4">
        <button class="btn btn-primary" @click="runSpringCalc()">è¨ˆç®—</button>
        <button class="btn btn-sm bg-slate-600 text-slate-200" @click="loadFromPrediction()" x-show="result">å¾ç›®å‰è¨­å®šå¸¶å…¥</button>
      </div>

      <!-- Result -->
      <template x-if="springCalcResult">
        <div class="card2 p-4">
          <div class="text-xs text-slate-400 mb-2">è¨ˆç®—çµæœ</div>
          <template x-if="springCalc.mode==='freq_to_spring'">
            <div class="space-y-2">
              <div class="flex justify-between"><span class="text-xs text-slate-400">æ‰€éœ€å½ˆç°§ç‡</span><span class="text-lg font-bold text-sky-400" x-text="springCalcResult.spring_rate+' N/mm'"></span></div>
              <div class="flex justify-between"><span class="text-xs text-slate-400">Wheel Rate</span><span class="text-sm font-mono" x-text="springCalcResult.wheel_rate+' N/mm'"></span></div>
              <div class="flex justify-between"><span class="text-xs text-slate-400">æœ‰æ•ˆ Wheel Rate</span><span class="text-sm font-mono" x-text="springCalcResult.effective_wheel_rate+' N/mm'"></span></div>
              <div class="flex justify-between"><span class="text-xs text-slate-400">å¯¦éš›é »ç‡</span><span class="text-sm font-mono" x-text="springCalcResult.frequency_hz+' Hz'"></span></div>
              <div class="flex justify-between"><span class="text-xs text-slate-400">åˆ†é¡</span><span class="badge" :class="springCatBadge(springCalcResult.category)" x-text="springCatLabel(springCalcResult.category)"></span></div>
            </div>
          </template>
          <template x-if="springCalc.mode==='spring_to_freq'">
            <div class="space-y-2">
              <div class="flex justify-between"><span class="text-xs text-slate-400">Ride Frequency</span><span class="text-lg font-bold text-sky-400" x-text="springCalcResult.frequency_hz+' Hz'"></span></div>
              <div class="flex justify-between"><span class="text-xs text-slate-400">Wheel Rate</span><span class="text-sm font-mono" x-text="springCalcResult.wheel_rate+' N/mm'"></span></div>
              <div class="flex justify-between"><span class="text-xs text-slate-400">æœ‰æ•ˆ Wheel Rate</span><span class="text-sm font-mono" x-text="springCalcResult.effective_wheel_rate+' N/mm'"></span></div>
              <div class="flex justify-between"><span class="text-xs text-slate-400">åˆ†é¡</span><span class="badge" :class="springCatBadge(springCalcResult.category)" x-text="springCatLabel(springCalcResult.category)"></span></div>
            </div>
          </template>
        </div>
      </template>
    </div>

    <!-- Right: ARB Sizing -->
    <div class="card p-5">
      <div class="section-title">ARB é˜²å‚¾æ¡¿è¨ˆç®—</div>
      <div class="text-xs text-slate-500 mb-3">æ ¹æ“šç›®æ¨™ Roll Gradient åç®—æ‰€éœ€é˜²å‚¾æ¡¿å‰›æ€§</div>

      <div class="grid grid-cols-2 gap-3 mb-4">
        <div>
          <label class="text-[10px] text-slate-400 block mb-1">ç›®æ¨™ Roll Gradient (Â°/g)</label>
          <input type="number" step="0.1" x-model.number="arbCalc.target_roll_grad" class="w-full">
        </div>
        <div>
          <label class="text-[10px] text-slate-400 block mb-1">å‰è¼ªåˆ†é… (%)</label>
          <input type="number" step="1" x-model.number="arbCalc.front_pct" class="w-full">
        </div>
        <div>
          <label class="text-[10px] text-slate-400 block mb-1">è»Šé‡ (kg)</label>
          <input type="number" step="10" x-model.number="arbCalc.total_weight" class="w-full">
        </div>
        <div>
          <label class="text-[10px] text-slate-400 block mb-1">é‡å¿ƒé«˜åº¦ (mm)</label>
          <input type="number" step="5" x-model.number="arbCalc.cg_height" class="w-full">
        </div>
        <div>
          <label class="text-[10px] text-slate-400 block mb-1">å‰å½ˆç°§ Roll Stiffness (Nm/deg)</label>
          <input type="number" step="10" x-model.number="arbCalc.spring_roll_front" class="w-full">
        </div>
        <div>
          <label class="text-[10px] text-slate-400 block mb-1">å¾Œå½ˆç°§ Roll Stiffness (Nm/deg)</label>
          <input type="number" step="10" x-model.number="arbCalc.spring_roll_rear" class="w-full">
        </div>
      </div>

      <div class="flex gap-2 mb-4">
        <button class="btn btn-primary" @click="runArbCalc()">è¨ˆç®—</button>
        <button class="btn btn-sm bg-slate-600 text-slate-200" @click="loadArbFromPrediction()" x-show="result">å¾é æ¸¬çµæœå¸¶å…¥</button>
      </div>

      <template x-if="arbResult">
        <div class="card2 p-4">
          <div class="text-xs text-slate-400 mb-2">ARB è¨ˆç®—çµæœ</div>
          <div class="space-y-2">
            <div x-show="arbResult.current_roll_gradient>0" class="flex justify-between"><span class="text-xs text-slate-400">ç›®å‰ Roll Gradientï¼ˆåƒ…å½ˆç°§ï¼‰</span><span class="text-sm font-mono text-yellow-400" x-text="arbResult.current_roll_gradient+'Â°/g'"></span></div>
            <div class="flex justify-between"><span class="text-xs text-slate-400">æ‰€éœ€ç¸½ Roll Stiffness</span><span class="text-sm font-bold" x-text="arbResult.total_roll_needed+' Nm/deg'"></span></div>
            <div class="border-t border-white/5 my-2"></div>
            <div class="flex justify-between"><span class="text-xs text-slate-400">å‰è»¸éœ€è¦</span><span class="text-sm font-mono" x-text="arbResult.front_roll_needed+' Nm/deg'"></span></div>
            <div class="flex justify-between"><span class="text-xs text-slate-400">å¾Œè»¸éœ€è¦</span><span class="text-sm font-mono" x-text="arbResult.rear_roll_needed+' Nm/deg'"></span></div>
            <div class="border-t border-white/5 my-2"></div>
            <div class="flex justify-between"><span class="text-xs text-sky-400">å‰ ARB æ‰€éœ€å‰›æ€§</span><span class="text-lg font-bold text-sky-400" x-text="arbResult.front_arb_needed+' Nm/deg'"></span></div>
            <div class="flex justify-between"><span class="text-xs text-pink-400">å¾Œ ARB æ‰€éœ€å‰›æ€§</span><span class="text-lg font-bold text-pink-400" x-text="arbResult.rear_arb_needed+' Nm/deg'"></span></div>
          </div>
        </div>
      </template>
    </div>
  </div>

  <!-- Spring Rate Reference Table -->
  <div class="card p-5 mt-4" x-show="springTable.length>0">
    <div class="section-title">å½ˆç°§ç‡å°ç…§è¡¨</div>
    <div class="text-xs text-slate-500 mb-3">è§’è½è³ªé‡ <span x-text="springCalc.corner_mass"></span> kg Â· MR <span x-text="springCalc.motion_ratio"></span> Â· è¼ªèƒå½ˆç°§ <span x-text="springCalc.tire_spring_rate"></span> N/mm</div>
    <table>
      <thead><tr>
        <th>å½ˆç°§ç‡ (N/mm)</th><th>Wheel Rate (N/mm)</th><th>æœ‰æ•ˆ Wheel Rate (N/mm)</th><th>Ride Frequency (Hz)</th><th>åˆ†é¡</th>
      </tr></thead>
      <tbody>
        <template x-for="row in springTable" :key="row.spring_rate">
          <tr>
            <td class="font-mono font-semibold" x-text="row.spring_rate"></td>
            <td class="font-mono text-xs" x-text="row.wheel_rate"></td>
            <td class="font-mono text-xs" x-text="row.effective_wheel_rate"></td>
            <td class="font-mono text-xs" :class="springCatColor(row.category)" x-text="row.frequency_hz+' Hz'"></td>
            <td><span class="badge" :class="springCatBadge(row.category)" x-text="springCatLabel(row.category)"></span></td>
          </tr>
        </template>
      </tbody>
    </table>
  </div>
</div>

<!-- ==================== TAB: èƒæº«åˆ†æ ==================== -->
<div x-show="currentTab==='tire'" x-transition>
  <h2 class="text-xl font-bold mb-4">è¼ªèƒæŠ“åœ°åŠ›åˆ†æ</h2>
  <div class="grid-2">
    <div class="card p-5">
      <div class="section-title">æº«åº¦-æŠ“åœ°åŠ›æ›²ç·š</div>
      <div class="flex flex-wrap gap-1.5 mb-3">
        <template x-for="c in compoundList" :key="c">
          <button class="text-[10px] px-2 py-1 rounded-full" :class="selCompounds.includes(c)?'bg-sky-500 text-white':'bg-slate-700 text-slate-300'" @click="toggleArr(selCompounds,c);drawTireGrip()" x-text="getTireParams(c)[3]"></button>
        </template>
      </div>
      <canvas id="tireGripChart" height="250"></canvas>
    </div>
    <div class="card p-5">
      <div class="section-title">å£“åŠ›-æŠ“åœ°åŠ›æ›²ç·š</div>
      <canvas id="tirePressureChart" height="250"></canvas>
      <div class="text-xs text-slate-500 mt-2">æœ€ä½³å£“åŠ› = 1.90 bar æ™‚ 100%ï¼Œæ¯åé›¢ 0.1 bar é™ä½ç´„ 2%</div>
    </div>
  </div>
  <!-- Tire database table -->
  <div class="card p-5 mt-4" x-show="tireOptions.length">
    <div class="section-title">è³½é“æ—¥è¼ªèƒè³‡æ–™åº«</div>
    <div style="max-height:400px;overflow-y:auto">
      <table>
        <thead><tr>
          <th>è¼ªèƒ</th><th>å“ç‰Œ</th><th>TW</th><th>æŠ“åœ°åŠ›</th><th>æœ€ä½³æº«åº¦</th><th>æº«åŸŸ</th>
          <th>å»ºè­°å‰èƒå£“</th><th>å»ºè­°å¾Œèƒå£“</th><th>å‚™è¨»</th>
        </tr></thead>
        <tbody>
          <template x-for="t in tireOptions" :key="t.id">
            <tr>
              <td class="font-semibold text-xs" x-text="t.name_zh"></td>
              <td class="text-xs" x-text="t.brand"></td>
              <td><span class="badge" :class="t.treadwear <= 100?'badge-r':t.treadwear <= 200?'badge-y':'badge-g'" x-text="t.treadwear || 'N/A'"></span></td>
              <td class="font-mono text-xs" :class="t.peak_grip >= 1.15?'text-pink-400':t.peak_grip >= 1.08?'text-yellow-400':'text-slate-300'" x-text="(t.peak_grip*100).toFixed(0)+'%'"></td>
              <td class="font-mono text-xs" x-text="t.optimal_temp + 'Â°C'"></td>
              <td class="font-mono text-xs" x-text="'Â±' + t.temp_window + 'Â°C'"></td>
              <td class="font-mono text-xs text-green-400" x-text="fromBar(t.optimal_pressure_front_bar) + ' ' + pressureUnit.toUpperCase()"></td>
              <td class="font-mono text-xs text-green-400" x-text="fromBar(t.optimal_pressure_rear_bar) + ' ' + pressureUnit.toUpperCase()"></td>
              <td class="text-[10px] text-slate-500" x-text="t.notes"></td>
            </tr>
          </template>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ==================== TAB: ä½¿ç”¨èªªæ˜ ==================== -->
<div x-show="currentTab==='guide'" x-transition>
  <h2 class="text-xl font-bold mb-4">ä½¿ç”¨èªªæ˜ User Guide</h2>

  <!-- Quick Start -->
  <div class="card p-5 mb-4">
    <div class="section-title">å¿«é€Ÿä¸Šæ‰‹</div>
    <div class="text-sm leading-relaxed space-y-3">
      <p>Racing Dynamics æ˜¯ä¸€æ¬¾è»Šè¼›åº•ç›¤å‹•æ…‹åˆ†æå·¥å…·ï¼Œå¹«åŠ©ä½ åœ¨è³½é“æ—¥ä¹‹å‰<strong class="text-sky-400">é æ¸¬è»Šè¼›çš„è½‰å‘ç‰¹æ€§</strong>ï¼Œä¸¦çµ¦å‡ºå…·é«”çš„èª¿æ ¡å»ºè­°ã€‚</p>
      <div class="card2 p-4">
        <div class="text-xs text-slate-400 mb-2">åŸºæœ¬ä½¿ç”¨æµç¨‹</div>
        <ol class="list-decimal list-inside space-y-2 text-sm">
          <li><strong>è½‰å‘é æ¸¬</strong> â€” é¸æ“‡è»Šè¼›ï¼ˆè¡—è»Šæ¨¡å¼ï¼‰æˆ–æ‰‹å‹•è¼¸å…¥æ‡¸åŠåƒæ•¸ï¼ŒæŒ‰ã€Œè¨ˆç®—é æ¸¬ã€</li>
          <li><strong>èª¿æ ¡å»ºè­°</strong> â€” ç³»çµ±æ ¹æ“šçµæœç”¢ç”Ÿèª¿æ ¡å»ºè­°ï¼Œå‘Šè¨´ä½ è©²èª¿ä»€éº¼ã€èª¿å¤šå°‘</li>
          <li><strong>å½ˆç°§è¨ˆç®—</strong> â€” ç”¨è¨ˆç®—å™¨ç®—å‡ºéœ€è¦çš„å½ˆç°§å‹è™Ÿï¼ˆè¼¸å…¥ç›®æ¨™é »ç‡ â†’ å¾—åˆ°å½ˆç°§ç‡ï¼‰</li>
          <li><strong>è¼ªèƒåˆ†æ</strong> â€” æŸ¥çœ‹è¼ªèƒæŠ“åœ°åŠ› vs æº«åº¦/å£“åŠ›çš„é—œä¿‚æ›²ç·š</li>
          <li>èª¿å®Œåƒæ•¸å¾Œå›åˆ°ã€Œè½‰å‘é æ¸¬ã€é‡ç®—ï¼Œå¯è¨­å®š Baseline æ¯”è¼ƒå‰å¾Œå·®ç•°</li>
        </ol>
      </div>
    </div>
  </div>

  <!-- Tier Explanation -->
  <div class="card p-5 mb-4">
    <div class="section-title">ä¸‰å±¤åˆ†ææ¶æ§‹ Three-Tier System</div>
    <div class="grid grid-cols-3 gap-3">
      <div class="card2 p-4">
        <div class="badge badge-g mb-2">Tier 1 å¿«é€Ÿ</div>
        <div class="text-sm font-semibold mb-1">æ©Ÿæ¢°å¹³è¡¡</div>
        <div class="text-xs text-slate-400 leading-relaxed">
          åªéœ€è¦å½ˆç°§ç‡ã€ARBã€è»Šé‡åˆ†ä½ˆç­‰åŸºæœ¬åƒæ•¸ã€‚<br>
          è¨ˆç®— Roll Stiffness åˆ†ä½ˆã€LLTDã€Ride Frequencyã€‚<br>
          <strong class="text-green-400">é©åˆï¼š</strong>å¿«é€Ÿè©•ä¼°åº•ç›¤å¹³è¡¡æ–¹å‘
        </div>
      </div>
      <div class="card2 p-4">
        <div class="badge badge-y mb-2">Tier 2 è¼ªèƒ</div>
        <div class="text-sm font-semibold mb-1">è¼ªèƒæ„ŸçŸ¥</div>
        <div class="text-xs text-slate-400 leading-relaxed">
          åŠ å…¥è¼ªèƒæº«åº¦ã€å£“åŠ›ã€é…æ–¹è³‡æ–™ã€‚<br>
          è¨ˆç®—å››è§’æŠ“åœ°åŠ›ã€å‰å¾ŒæŠ“åœ°åŠ›æ¯”ã€è² è¼‰æ•æ„Ÿåº¦ã€‚<br>
          <strong class="text-yellow-400">é©åˆï¼š</strong>è€ƒæ…®è¼ªèƒç‹€æ…‹çš„åˆ†æ
        </div>
      </div>
      <div class="card2 p-4">
        <div class="badge badge-r mb-2">Tier 3 å®Œæ•´</div>
        <div class="text-sm font-semibold mb-1">å®Œæ•´å‹•æ…‹</div>
        <div class="text-xs text-slate-400 leading-relaxed">
          åŠ å…¥è§’è½é‡é‡ã€ç©ºåŠ›ã€é˜»å°¼å™¨ã€Camber/Toeã€‚<br>
          è¨ˆç®—é˜»å°¼æ¯”ã€ç¸±å‘è·é‡è½‰ç§»ã€Slip Angleã€Yaw Gainã€‚<br>
          <strong class="text-red-400">é©åˆï¼š</strong>è³½é“æ—¥å‰çš„å®Œæ•´è¨­å®šé©—è­‰
        </div>
      </div>
    </div>
  </div>

  <!-- Glossary -->
  <div class="card p-5 mb-4">
    <div class="section-title">å°ˆæ¥­åè©è§£é‡‹ Glossary</div>

    <div class="text-xs text-slate-500 mb-3">é»æ“Šé¡åˆ¥å¯å±•é–‹/æ”¶åˆ</div>

    <!-- Category: è½‰å‘ç‰¹æ€§ -->
    <div class="mb-3" x-data="{open:true}">
      <div class="flex items-center gap-2 cursor-pointer py-2 border-b border-white/5" @click="open=!open">
        <span class="text-xs" x-text="open?'â–¼':'â–¶'"></span>
        <span class="text-sm font-bold text-sky-400">è½‰å‘ç‰¹æ€§ Handling Characteristics</span>
      </div>
      <div x-show="open" x-transition class="space-y-3 mt-3">

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Understeer è½‰å‘ä¸è¶³ï¼ˆæ¨é ­ï¼‰</span>
            <span class="badge badge-r">US</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è»Šè¼›çš„è½‰å‘å¹…åº¦<strong>å°æ–¼</strong>é§•é§›è€…æ–¹å‘ç›¤è¼¸å…¥çš„è§’åº¦ã€‚å‰è¼ªå…ˆåˆ°é”æŠ“åœ°åŠ›æ¥µé™ï¼Œè»Šé ­å¾€å½å¤–è·‘ã€‚<br>
            <span class="text-slate-500">æ„Ÿè¦ºï¼šæ–¹å‘ç›¤æ‰“äº†ä½†è»Šä¸è½‰ â†’ã€Œæ¨é ­ã€ã€‚å°ä¸€èˆ¬é§•é§›è€…è¼ƒå®‰å…¨ï¼Œå› ç‚ºæ”¾æ²¹é–€å°±èƒ½ä¿®æ­£ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Oversteer è½‰å‘éåº¦ï¼ˆç”©å°¾ï¼‰</span>
            <span class="badge badge-b">OS</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è»Šè¼›çš„è½‰å‘å¹…åº¦<strong>å¤§æ–¼</strong>é§•é§›è€…æ–¹å‘ç›¤è¼¸å…¥çš„è§’åº¦ã€‚å¾Œè¼ªå…ˆåˆ°é”æŠ“åœ°åŠ›æ¥µé™ï¼Œè»Šå°¾å¾€å½å¤–æ»‘ã€‚<br>
            <span class="text-slate-500">æ„Ÿè¦ºï¼šè»Šå°¾çªç„¶å¤–æ»‘ â†’ã€Œç”©å°¾ã€ã€‚éœ€è¦å³æ™‚åæ‰“ä¿®æ­£ï¼Œè™•ç†é›£åº¦è¼ƒé«˜ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Neutral ä¸­æ€§</span>
            <span class="badge badge-g">N</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            å‰å¾Œè¼ªåŒæ™‚æ¥è¿‘æŠ“åœ°åŠ›æ¥µé™ï¼Œè»Šè¼›æŒ‰ç…§æ–¹å‘ç›¤è¼¸å…¥çš„è§’åº¦ç²¾ç¢ºè½‰å‘ã€‚<br>
            <span class="text-slate-500">é€™æ˜¯ç†æƒ³ç‹€æ…‹ï¼Œä½†ä¸ç©©å®š â€” è·æ¥­è»Šæ‰‹è¿½æ±‚å¾®å¾® Understeer çš„å®‰å…¨è¨­å®šã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Understeer Gradient è½‰å‘ä¸è¶³æ¢¯åº¦</span>
            <span class="badge badge-p">deg/g</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            é‡åŒ–è½‰å‘ç‰¹æ€§çš„æŒ‡æ¨™ï¼Œå–®ä½ deg/gï¼ˆåº¦/æ¯Gå´å‘åŠ é€Ÿåº¦ï¼‰ã€‚<br>
            <strong class="text-red-400">æ­£å€¼</strong> = Understeerï¼ˆå€¼è¶Šå¤§è¶Šæ¨é ­ï¼‰<br>
            <strong class="text-sky-400">è² å€¼</strong> = Oversteerï¼ˆå€¼è¶Šå¤§è¶Šç”©å°¾ï¼‰<br>
            <strong class="text-green-400">æ¥è¿‘ 0</strong> = Neutral<br>
            <span class="text-slate-500">æœ¬ç³»çµ±ç”¨ Â±3 deg/g ä½œç‚ºä¸­æ€§åˆ¤å®šé–¾å€¼ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Characteristic Speed ç‰¹å¾µé€Ÿåº¦</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            åªæœ‰ Understeer è»Šè¼›æ‰æœ‰çš„æŒ‡æ¨™ã€‚åœ¨é€™å€‹é€Ÿåº¦ä¸‹ï¼Œè½‰å‘å¢ç›Šï¼ˆYaw Gainï¼‰é™åˆ°ä¸€åŠã€‚<br>
            <span class="text-slate-500">æ„ç¾©ï¼šç‰¹å¾µé€Ÿåº¦è¶Šé«˜ï¼Œé«˜é€Ÿä¸‹æ–¹å‘ç›¤åæ‡‰è¶Šéˆæ•ã€‚Oversteer è»Šæ²’æœ‰ç‰¹å¾µé€Ÿåº¦ â€” ç†è«–ä¸Šè½‰å‘å¢ç›Šç„¡é™ä¸Šå‡ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Yaw Gain åèˆªå¢ç›Š</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            æ¯åº¦æ–¹å‘ç›¤è¼¸å…¥ç”¢ç”Ÿçš„è»Šèº«æ—‹è½‰é€Ÿç‡ï¼ˆdeg/s per degï¼‰ã€‚<br>
            <span class="text-slate-500">ä½é€Ÿæ™‚ Yaw Gain â‰ˆ V/Lï¼ˆé€Ÿåº¦Ã·è»¸è·ï¼‰ã€‚Understeer è»Šåœ¨é«˜é€Ÿæ™‚ Yaw Gain é™ä½ï¼ˆåæ‡‰è®Šéˆï¼‰ï¼ŒOversteer è»Šå‰‡å¢åŠ ï¼ˆåæ‡‰è®Šéˆæ•ç”šè‡³å¤±æ§ï¼‰ã€‚</span>
          </div>
        </div>

      </div>
    </div>

    <!-- Category: æ‡¸åŠèˆ‡å½ˆç°§ -->
    <div class="mb-3" x-data="{open:true}">
      <div class="flex items-center gap-2 cursor-pointer py-2 border-b border-white/5" @click="open=!open">
        <span class="text-xs" x-text="open?'â–¼':'â–¶'"></span>
        <span class="text-sm font-bold text-green-400">æ‡¸åŠèˆ‡å½ˆç°§ Suspension & Springs</span>
      </div>
      <div x-show="open" x-transition class="space-y-3 mt-3">

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Spring Rate å½ˆç°§ç‡</span>
            <span class="badge badge-g">N/mm</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            å½ˆç°§æ¯å£“ç¸® 1mm éœ€è¦çš„åŠ›ï¼ˆN/mmï¼‰ã€‚æ•¸å­—è¶Šå¤§å½ˆç°§è¶Šç¡¬ã€‚<br>
            <span class="text-slate-500">ä¾‹ï¼š80 N/mm çš„è¡—è»Šå½ˆç°§å£“ 10mm éœ€è¦ 800Nï¼ˆç´„ 82 kgï¼‰çš„åŠ›ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Wheel Rate è¼ªç‡</span>
            <span class="badge badge-g">N/mm</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            å¾è¼ªèƒæ¥è§¸é¢çœ‹åˆ°çš„æœ‰æ•ˆå½ˆç°§ç‡ = Spring Rate Ã— Motion RatioÂ²ã€‚<br>
            <span class="text-slate-500">å› ç‚ºé¿éœ‡å™¨çš„å®‰è£è§’åº¦å’Œä½ç½®ï¼ˆMotion Ratioï¼‰ï¼Œè¼ªèƒå¯¦éš›æ„Ÿå—åˆ°çš„ç¡¬åº¦è·Ÿå½ˆç°§æœ¬èº«ä¸åŒã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Effective Wheel Rate æœ‰æ•ˆè¼ªç‡</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è¼ªèƒå½ˆç°§å’Œæ‡¸åŠå½ˆç°§<strong>ä¸²è¯</strong>å¾Œçš„å¯¦éš›å‰›æ€§ã€‚å…¬å¼ï¼š1/K_eff = 1/K_tire + 1/K_wheel<br>
            <span class="text-slate-500">å› ç‚ºè¼ªèƒæœ¬èº«ä¹Ÿæœ‰å½ˆæ€§ï¼ˆç´„ 180-260 N/mmï¼‰ï¼Œå¯¦éš›è¼ªç‡æ°¸é æ¯”å½ˆç°§å–®ç¨çš„ Wheel Rate æ›´ä½ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Motion Ratio é‹å‹•æ¯”</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            é¿éœ‡å™¨/å½ˆç°§çš„ä½ç§»é‡ Ã· è¼ªèƒçš„ä½ç§»é‡ã€‚<br>
            <span class="text-slate-500">ä¾‹ï¼šMR = 0.85 ä»£è¡¨è¼ªèƒç§»å‹• 10mm æ™‚å½ˆç°§åªå£“ç¸® 8.5mmã€‚å¤§å¤šæ•¸é‡ç”¢è»Š MR åœ¨ 0.6-1.0 ä¹‹é–“ã€‚ç›´æ¥å®‰è£åœ¨è¼ªè»¸ä¸Šçš„ MR = 1.0ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Ride Frequency å›ºæœ‰é »ç‡</span>
            <span class="badge badge-y">Hz</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            æ‡¸åŠç³»çµ±çš„è‡ªç„¶æŒ¯ç›ªé »ç‡ï¼Œåæ˜ è»Šè¼›é€šéè·¯é¢ä¸å¹³æ™‚çš„åæ‡‰é€Ÿåº¦ã€‚<br>
            <strong>å…¬å¼ï¼š</strong>f = 1/(2Ï€) Ã— âˆš(K_eff / m_corner)<br><br>
            <div class="grid grid-cols-4 gap-2 text-center">
              <div><span class="badge badge-b">< 1.5 Hz</span><div class="text-[10px] mt-1">èˆ’é©</div></div>
              <div><span class="badge badge-g">1.5-2.5 Hz</span><div class="text-[10px] mt-1">è¡—é“</div></div>
              <div><span class="badge badge-y">2.5-3.5 Hz</span><div class="text-[10px] mt-1">è³½é“</div></div>
              <div><span class="badge badge-r">> 3.5 Hz</span><div class="text-[10px] mt-1">ç«¶æŠ€</div></div>
            </div>
            <div class="mt-2 text-slate-500"><strong>å‰/å¾Œæ¯”å€¼</strong>å»ºè­° 0.85-0.95ï¼ˆå¾Œç•¥é«˜æ–¼å‰ï¼‰ï¼Œç¨±ç‚º Flat Ride â€” è»Šèº«é€šéè·¯é¢å‡¸èµ·æ™‚ä¸æœƒç”¢ç”Ÿ pitchï¼ˆå‰å¾Œæ–æ“ºï¼‰ã€‚</div>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">ARB / Anti-Roll Bar é˜²å‚¾æ¡¿</span>
            <span class="badge badge-g">Nm/deg</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            é€£æ¥å·¦å³è¼ªçš„æ‰­åŠ›æ¡¿ï¼Œåœ¨è»Šèº«å´å‚¾æ™‚æä¾›é¡å¤–çš„ Roll Stiffnessã€‚<br>
            <span class="text-slate-500">å¢åŠ å‰ ARB â†’ å¢åŠ å‰è»¸è·é‡è½‰ç§» â†’ æ›´ Understeerã€‚å¢åŠ å¾Œ ARB â†’ æ›´ Oversteerã€‚ARB æ˜¯èª¿æ•´è½‰å‘å¹³è¡¡æœ€ç›´æ¥çš„å·¥å…·ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Damping Ratio é˜»å°¼æ¯”</span>
            <span class="badge badge-p">Î¶</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            é˜»å°¼å™¨ï¼ˆé¿éœ‡å™¨ï¼‰æŠ‘åˆ¶å½ˆç°§æŒ¯ç›ªçš„èƒ½åŠ›ã€‚<br>
            <strong>å…¬å¼ï¼š</strong>Î¶ = c / (2 Ã— âˆš(K Ã— m))<br><br>
            <div class="grid grid-cols-4 gap-2 text-center">
              <div><span class="badge badge-r">< 0.3</span><div class="text-[10px] mt-1">æ¬ é˜»å°¼</div></div>
              <div><span class="badge badge-y">0.3-0.5</span><div class="text-[10px] mt-1">è¡—é“</div></div>
              <div><span class="badge badge-g">0.5-0.8</span><div class="text-[10px] mt-1">è³½é“</div></div>
              <div><span class="badge badge-b">> 0.8</span><div class="text-[10px] mt-1">ç«¶æŠ€</div></div>
            </div>
            <div class="mt-2 text-slate-500">æ¬ é˜»å°¼ï¼ˆ< 0.3ï¼‰ï¼šå£“åˆ°è·¯é¢å‡¸èµ·å¾Œè»Šèº«æŒçºŒå½ˆè·³ã€‚éé˜»å°¼ï¼ˆ> 1.0ï¼‰ï¼šé¿éœ‡å™¨å¤ªç¡¬ï¼Œå½ˆç°§ç„¡æ³•æ­£å¸¸å·¥ä½œã€‚</div>
          </div>
        </div>

      </div>
    </div>

    <!-- Category: è·é‡è½‰ç§» -->
    <div class="mb-3" x-data="{open:true}">
      <div class="flex items-center gap-2 cursor-pointer py-2 border-b border-white/5" @click="open=!open">
        <span class="text-xs" x-text="open?'â–¼':'â–¶'"></span>
        <span class="text-sm font-bold text-yellow-400">è·é‡è½‰ç§» Load Transfer</span>
      </div>
      <div x-show="open" x-transition class="space-y-3 mt-3">

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">LLTD å´å‘è·é‡è½‰ç§»åˆ†ä½ˆ</span>
            <span class="badge badge-y">Lateral Load Transfer Distribution</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            éå½æ™‚ï¼Œ<strong>å‰è»¸æ‰¿æ“”å¤šå°‘æ¯”ä¾‹çš„å´å‘è·é‡è½‰ç§»</strong>ã€‚é€™æ˜¯æ±ºå®šè½‰å‘ç‰¹æ€§çš„æ ¸å¿ƒæŒ‡æ¨™ã€‚<br><br>
            <strong>åŸç†ï¼š</strong>éå½æ™‚é›¢å¿ƒåŠ›ä½¿è»Šèº«å´å‚¾ï¼Œé‡é‡å¾å…§å´è¼ªè½‰ç§»åˆ°å¤–å´è¼ªã€‚LLTD æ±ºå®šå‰å¾Œè»¸å„æ‰¿æ“”å¤šå°‘æ¯”ä¾‹ã€‚<br><br>
            <strong class="text-red-400">LLTD > é‡é‡åˆ†ä½ˆ</strong> â†’ Understeerï¼ˆå‰è»¸è·é‡è½‰ç§»æ¯”ä¾‹é«˜ï¼Œå‰è¼ªå…ˆé£½å’Œï¼‰<br>
            <strong class="text-sky-400">LLTD < é‡é‡åˆ†ä½ˆ</strong> â†’ Oversteerï¼ˆå¾Œè»¸è·é‡è½‰ç§»æ¯”ä¾‹é«˜ï¼Œå¾Œè¼ªå…ˆé£½å’Œï¼‰<br>
            <span class="text-slate-500">ä¾‹ï¼šLLTD å‰ 60% + é‡é‡åˆ†ä½ˆå‰ 55% â†’ å·®è· 5% â†’ è¼•å¾® Understeerã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Geometric vs Elastic å¹¾ä½• vs å½ˆæ€§è·é‡è½‰ç§»</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è·é‡è½‰ç§»ç”±å…©å€‹è·¯å¾‘ç”¢ç”Ÿï¼š<br><br>
            <strong>å¹¾ä½•è·é‡è½‰ç§»</strong>ï¼šé€é Roll Centerï¼ˆå´å‚¾ä¸­å¿ƒï¼‰ç›´æ¥å‚³éã€‚<strong>ç¬é–“ç™¼ç”Ÿ</strong>ï¼Œä¸ç¶“éå½ˆç°§ã€‚<br>
            <strong>å½ˆæ€§è·é‡è½‰ç§»</strong>ï¼šé€éå½ˆç°§å’Œ ARB çš„å´å‚¾ç”¢ç”Ÿã€‚<strong>æœ‰å»¶é²</strong>ï¼Œè·Ÿéš¨è»Šèº«å´å‚¾è§’åº¦ã€‚<br><br>
            <span class="text-slate-500">å¹¾ä½•ä½”æ¯”é«˜ â†’ éæ¸¡åæ‡‰å¿«ä½†å¯èª¿ç¯„åœå°ã€‚å½ˆæ€§ä½”æ¯”é«˜ â†’ å¯é€é ARB èª¿æ•´ã€‚ä¸€èˆ¬è»Šè¼›å¹¾ä½•ä½” 20-35% ç‚ºæ­£å¸¸ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Roll Stiffness å´å‚¾å‰›æ€§</span>
            <span class="badge badge-y">Nm/deg</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è»Šèº«æ¯å´å‚¾ 1 åº¦éœ€è¦çš„åŠ›çŸ©ã€‚ç”±å½ˆç°§ + ARB å…±åŒæä¾›ã€‚<br>
            <span class="text-slate-500">Roll Stiffness Distributionï¼ˆå‰å¾Œåˆ†é…æ¯”ï¼‰ç›´æ¥å½±éŸ¿ LLTD çš„å½ˆæ€§éƒ¨åˆ†ã€‚å‰ä½”æ¯”è¶Šé«˜ â†’ è¶Š Understeerã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Roll Gradient å´å‚¾æ¢¯åº¦</span>
            <span class="badge badge-y">deg/g</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            æ¯ 1G å´å‘åŠ é€Ÿåº¦é€ æˆçš„è»Šèº«å´å‚¾è§’åº¦ã€‚<br>
            <span class="text-slate-500">è¡—è»Šç´„ 3-6Â°/gï¼Œè³½é“æ”¹è£è»Š < 2Â°/gï¼Œæ–¹ç¨‹å¼è³½è»Š < 1Â°/gã€‚å€¼è¶Šå°ä»£è¡¨è»Šèº«è¶Šç©©å®šã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Roll Center å´å‚¾ä¸­å¿ƒ</span>
            <span class="badge badge-y">mm</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è»Šè¼›å´å‚¾æ™‚çš„è™›æ“¬æ—‹è½‰ä¸­å¿ƒé»ï¼Œç”±æ‡¸åŠå¹¾ä½•æ±ºå®šï¼ˆAè‡‚è§’åº¦ç­‰ï¼‰ã€‚<br>
            <span class="text-slate-500">Roll Center è¶Šé«˜ â†’ å¹¾ä½•è·é‡è½‰ç§»ä½”æ¯”è¶Šå¤§ã€‚ä¸€èˆ¬å‰è»¸ 30-80mmï¼Œå¾Œè»¸ 80-150mmã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Longitudinal Load Transfer ç¸±å‘è·é‡è½‰ç§»</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            ç…è»Šæˆ–åŠ é€Ÿæ™‚ï¼Œå‰å¾Œè»¸ä¹‹é–“çš„é‡é‡è½‰ç§»ã€‚<br>
            <strong>å…¬å¼ï¼š</strong>Î”Fz = M Ã— G_force Ã— h_CG / wheelbase<br>
            <span class="text-slate-500">ç…è»Šæ™‚é‡é‡å¾€å‰ç§»ï¼ˆå‰è¼ªè² æ“”å¢åŠ ï¼‰ã€‚åŠ é€Ÿæ™‚é‡é‡å¾€å¾Œç§»ï¼ˆå¾Œè¼ªè² æ“”å¢åŠ ï¼‰ã€‚é‡å¿ƒè¶Šé«˜ã€è»¸è·è¶ŠçŸ­ï¼Œè½‰ç§»è¶Šå¤§ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Cross Weight å°è§’é‡é‡</span>
            <span class="badge badge-y">%</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            (å·¦å‰ + å³å¾Œ) Ã· ç¸½é‡ Ã— 100%ã€‚ç†æƒ³å€¼ = 50%ã€‚<br>
            <span class="text-slate-500">åé›¢ 50% ä»£è¡¨è»Šè¼›å·¦å³è½‰æ™‚ç‰¹æ€§ä¸åŒã€‚> 50% â†’ å·¦è½‰è¼ƒç©©å®šï¼Œå³è½‰è¼ƒä¸ç©©ã€‚å¯é€éå½ˆç°§é è¼‰æˆ–å¢Šç‰‡èª¿æ•´ã€‚</span>
          </div>
        </div>

      </div>
    </div>

    <!-- Category: è¼ªèƒ -->
    <div class="mb-3" x-data="{open:true}">
      <div class="flex items-center gap-2 cursor-pointer py-2 border-b border-white/5" @click="open=!open">
        <span class="text-xs" x-text="open?'â–¼':'â–¶'"></span>
        <span class="text-sm font-bold text-pink-400">è¼ªèƒ Tires</span>
      </div>
      <div x-show="open" x-transition class="space-y-3 mt-3">

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Tire Grip è¼ªèƒæŠ“åœ°åŠ›</span>
            <span class="badge badge-p">%</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è¼ªèƒåœ¨ç•¶å‰æº«åº¦å’Œå£“åŠ›ä¸‹èƒ½ç™¼æ®çš„æŠ“åœ°åŠ›ç™¾åˆ†æ¯”ï¼ˆ100% = æœ€ä½³æ¢ä»¶ï¼‰ã€‚<br>
            <span class="text-slate-500">å—ä¸‰å€‹å› ç´ å½±éŸ¿ï¼šæº«åº¦ï¼ˆé˜å½¢æ›²ç·šï¼Œåé›¢æœ€ä½³æº«åº¦å°±ä¸‹é™ï¼‰ã€å£“åŠ›ï¼ˆæ¯åé›¢ 0.1 bar ä¸‹é™ç´„ 2%ï¼‰ã€èƒå¯¬ï¼ˆé¢ç©è¶Šå¤§æŠ“åœ°è¶Šå¥½ï¼Œä½†æœ‰éæ¸›æ•ˆæ‡‰ï¼‰ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Tire Load Sensitivity è¼ªèƒè² è¼‰æ•æ„Ÿåº¦</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è¼ªèƒæ‰¿å—è¶Šå¤§çš„å‚ç›´è·é‡ï¼ŒæŠ“åœ°åŠ›<strong>æ•ˆç‡</strong>è¶Šä½çš„ç¾è±¡ã€‚<br>
            <span class="text-slate-500">ä¾‹ï¼š2000N è·é‡æ™‚ Î¼=1.0ï¼Œä½† 4000N è·é‡æ™‚ Î¼ å¯èƒ½åªæœ‰ 0.91ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼è·é‡è½‰ç§»æœƒé™ä½ç¸½æŠ“åœ°åŠ› â€” å¤–å´è¼ªå¢åŠ çš„æŠ“åœ°åŠ› < å…§å´è¼ªæ¸›å°‘çš„æŠ“åœ°åŠ›ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Slip Angle å´åè§’</span>
            <span class="badge badge-p">deg</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è¼ªèƒçš„è¡Œé€²æ–¹å‘èˆ‡å¯¦éš›æœå‘ä¹‹é–“çš„è§’åº¦å·®ã€‚<br>
            <span class="text-slate-500">éå½æ™‚è¼ªèƒæœƒç”¢ç”Ÿå´åè§’æ‰èƒ½ç”¢ç”Ÿè½‰å‘åŠ›ã€‚è§’åº¦è¶Šå¤§ â†’ æŠ“åœ°åŠ›è¶Šå¤§ â†’ ä½†è¶…éå³°å€¼å¾Œæ€¥åŠ‡ä¸‹é™ï¼ˆå¤±æ§ï¼‰ã€‚å‰è¼ªå…ˆé£½å’Œ = Understeerï¼Œå¾Œè¼ªå…ˆé£½å’Œ = Oversteerã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Pacejka Magic Formula é­”è¡“å…¬å¼</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            Hans Pacejka æ•™æˆé–‹ç™¼çš„è¼ªèƒåŠ›å­¸ç¶“é©—å…¬å¼ï¼Œç”¨æ•¸å­¸æ¨¡å‹æ¨¡æ“¬è¼ªèƒåœ¨å„ç¨®æ¢ä»¶ä¸‹çš„è¡¨ç¾ã€‚<br>
            <strong>å…¬å¼ï¼š</strong>F = D Ã— sin(C Ã— atan(BÃ—Î± - EÃ—(BÃ—Î± - atan(BÃ—Î±))))<br>
            <span class="text-slate-500">B=å‰›æ€§å› å­ã€C=å½¢ç‹€å› å­ã€D=å³°å€¼ã€E=æ›²ç‡ã€‚å¹¾ä¹æ‰€æœ‰å°ˆæ¥­è¼ªèƒæ¨¡æ“¬éƒ½åŸºæ–¼æ­¤å…¬å¼çš„è®Šé«”ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Treadwear ç£¨è€—æŒ‡æ•¸</span>
            <span class="badge badge-p">TW</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            ç¾åœ‹ UTQG æ¨™æº–çš„è¼ªèƒç£¨è€—ç­‰ç´šã€‚æ•¸å­—è¶Šå° = æŠ“åœ°åŠ›è¶Šå¥½ä½†ç£¨è€—è¶Šå¿«ã€‚<br>
            <span class="text-slate-500">TW 100 ä»¥ä¸‹ï¼šåŠç†±ç†”èƒï¼ˆè³½é“ç”¨ï¼‰ã€‚TW 140-200ï¼šé«˜æ€§èƒ½è¡—èƒã€‚TW 300+ï¼šä¸€èˆ¬è¡—èƒã€‚TW è¶Šä½æŠ“åœ°åŠ›è¶Šå¥½ï¼Œä½†ä¸€æ¢èƒå¯èƒ½åªè·‘ 5000kmã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Tire Spring Rate è¼ªèƒå½ˆç°§ç‡</span>
            <span class="badge badge-b">N/mm</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è¼ªèƒæœ¬èº«çš„å‚ç›´å‰›æ€§ï¼Œç­‰åŒæ–¼ä¸€å€‹ä¸²è¯åœ¨æ‡¸åŠå½ˆç°§ä¸‹æ–¹çš„ã€Œé¡å¤–å½ˆç°§ã€ã€‚<br>
            <strong>ç‚ºä»€éº¼é‡è¦ï¼š</strong>è¼ªèƒå½ˆç°§ç‡èˆ‡æ‡¸åŠå½ˆç°§ä¸²è¯å¾Œï¼Œæœ‰æ•ˆå½ˆç°§ç‡ = 1/(1/K_spring + 1/K_tire)ï¼Œç›´æ¥å½±éŸ¿ Ride Frequency å’Œ Roll Stiffnessã€‚<br>
            <strong>å¦‚ä½•å–å¾—ï¼š</strong>è¼ªèƒå» å•†æ¥µå°‘å…¬é–‹æ­¤æ•¸å€¼ã€‚æœ¬ç³»çµ±ä½¿ç”¨ç¶“é©—å…¬å¼è‡ªå‹•ä¼°ç®—ï¼š<br>
            <span class="text-sky-400">K_tire â‰ˆ åŸºæº–å€¼ Ã— (åŸºæº–æ‰å¹³æ¯”/å¯¦éš›æ‰å¹³æ¯”) Ã— (å¯¦éš›èƒå¯¬/åŸºæº–èƒå¯¬)^0.3</span><br>
            <span class="text-slate-500">
              <strong>æ‰å¹³æ¯”è¶Šä½ â†’ èƒå£è¶Šè–„è¶Šç¡¬ â†’ å½ˆç°§ç‡è¶Šé«˜</strong>ã€‚å…¸å‹å€¼ï¼š<br>
              55 æ‰å¹³æ¯” â‰ˆ 180-220 N/mmï¼ˆèˆ’é©è¡—èƒï¼‰<br>
              45 æ‰å¹³æ¯” â‰ˆ 220-260 N/mmï¼ˆé‹å‹•è¡—èƒï¼‰<br>
              40 æ‰å¹³æ¯” â‰ˆ 250-290 N/mmï¼ˆé«˜æ€§èƒ½èƒï¼‰<br>
              35 æ‰å¹³æ¯” â‰ˆ 280-340 N/mmï¼ˆè¶…è·‘ä½æ‰å¹³æ¯”ï¼‰<br>
              30 æ‰å¹³æ¯” â‰ˆ 320-400 N/mmï¼ˆæ¥µä½æ‰å¹³æ¯”ï¼‰<br>
              åŸºæº–å€¼ï¼š205/55R16 â‰ˆ 220 N/mm
            </span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Wheel Upgrade è¼ªåœˆå‡ç´š</span>
            <span class="badge badge-g">æ¨¡æ“¬</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            æ›´æ›è¼ƒå¤§çš„è¼ªåœˆï¼ˆä¾‹å¦‚ 17" â†’ 18"ï¼‰ï¼Œé€šå¸¸æ­é…æ›´ä½æ‰å¹³æ¯”çš„è¼ªèƒä»¥ä¿æŒå¤–å¾‘ä¸è®Šã€‚<br>
            <strong>å½±éŸ¿ï¼š</strong><br>
            <span class="text-sky-400">âœ… è¼ªåœˆåŠ å¤§ â†’ æ‰å¹³æ¯”é™ä½ â†’ èƒå£æ›´ç¡¬ â†’ å½ˆç°§ç‡ä¸Šå‡ â†’ åæ‡‰æ›´å¿«ã€å´å‚¾æ›´å°</span><br>
            <span class="text-red-400">âš ï¸ å½ˆç°§ç‡ä¸Šå‡ â†’ Ride Frequency å‡é«˜ â†’ èˆ’é©æ€§é™ä½ã€å¯èƒ½éç¡¬</span><br>
            <span class="text-slate-500">æœ¬ç³»çµ±çš„ã€Œè¼ªåœˆå‡ç´šæ¨¡æ“¬ã€åŠŸèƒ½æœƒè‡ªå‹•è¨ˆç®—å¤–å¾‘ä¸è®Šä¸‹çš„æ–°æ‰å¹³æ¯”ï¼Œä»¥åŠå°æ‡‰çš„å½ˆç°§ç‡è®ŠåŒ–ã€‚</span>
          </div>
        </div>

      </div>
    </div>

    <!-- Category: ç©ºåŠ›èˆ‡å¹¾ä½• -->
    <div class="mb-3" x-data="{open:true}">
      <div class="flex items-center gap-2 cursor-pointer py-2 border-b border-white/5" @click="open=!open">
        <span class="text-xs" x-text="open?'â–¼':'â–¶'"></span>
        <span class="text-sm font-bold text-purple-400">ç©ºåŠ›èˆ‡å¹¾ä½• Aero & Geometry</span>
      </div>
      <div x-show="open" x-transition class="space-y-3 mt-3">

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Downforce ä¸‹å£“åŠ›</span>
            <span class="badge badge-b">kg</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            ç©ºæ°£æµéè»Šèº«ç”¢ç”Ÿçš„å‘ä¸‹å£“åŠ›ï¼Œå¢åŠ è¼ªèƒçš„å‚ç›´è·é‡ï¼ˆä¸å¢åŠ æ…£æ€§è³ªé‡ï¼‰ã€‚<br>
            <strong>å…¬å¼ï¼š</strong>Df = 0.5 Ã— Ï_air Ã— VÂ² Ã— A Ã— Cz<br>
            <span class="text-slate-500">èˆ‡é€Ÿåº¦çš„<strong>å¹³æ–¹</strong>æˆæ­£æ¯” â€” 200 km/h çš„ä¸‹å£“åŠ›æ˜¯ 100 km/h çš„ 4 å€ã€‚å‰å¾Œä¸‹å£“åŠ›åˆ†ä½ˆå½±éŸ¿é«˜é€Ÿæ™‚çš„è½‰å‘ç‰¹æ€§ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Aero Balance ç©ºåŠ›å¹³è¡¡</span>
            <span class="badge badge-b">%</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            å‰è»¸ä¸‹å£“åŠ›ä½”ç¸½ä¸‹å£“åŠ›çš„æ¯”ä¾‹ã€‚<br>
            <span class="text-slate-500">å¦‚æœç©ºåŠ›å¹³è¡¡è·Ÿé‡é‡åˆ†ä½ˆå·®è·å¤ªå¤§ï¼Œé«˜é€Ÿå’Œä½é€Ÿæ™‚çš„è½‰å‘ç‰¹æ€§æœƒå®Œå…¨ä¸åŒã€‚ä¾‹ï¼šä½é€Ÿ Understeer ä½†é«˜é€Ÿ Oversteerã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Camber å¤–å‚¾è§’</span>
            <span class="badge badge-b">deg</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            å¾è»Šé ­æ­£é¢çœ‹ï¼Œè¼ªèƒé ‚éƒ¨å¾€å…§æˆ–å¤–å‚¾æ–œçš„è§’åº¦ã€‚<br>
            <strong>è²  Camber</strong>ï¼ˆè¼ªèƒé ‚éƒ¨å¾€å…§ï¼‰ï¼šå¢åŠ éå½æ™‚å¤–å´è¼ªçš„æ¥åœ°é¢ç©ï¼Œæå‡æŠ“åœ°åŠ›ã€‚<br>
            <span class="text-slate-500">è³½é“å»ºè­°ï¼šå‰ -2.5Â° ~ -3.5Â°ï¼Œå¾Œ -1.5Â° ~ -2.5Â°ã€‚éå¤§çš„è²  Camber æœƒåŠ é€Ÿç›´ç·šè¡Œé§›æ™‚çš„èƒè‚©ç£¨è€—ã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">Toe æŸè§’</span>
            <span class="badge badge-b">deg</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            å¾è»Šé ‚ä¿¯è¦–ï¼Œå·¦å³è¼ªèƒæ˜¯å¦å¾€å…§ï¼ˆToe-inï¼‰æˆ–å¾€å¤–ï¼ˆToe-outï¼‰æŒ‡ã€‚<br>
            <strong>å‰ Toe-out</strong>ï¼šå…¥å½åæ‡‰æ›´å¿«ï¼Œä½†ç›´ç·šç©©å®šæ€§é™ä½ã€‚<br>
            <strong>å¾Œ Toe-in</strong>ï¼šå¢åŠ å¾Œè»¸ç©©å®šæ€§ï¼ˆæ¸›å°‘ Oversteerï¼‰ã€‚<br>
            <span class="text-slate-500">Toe éå¤§æœƒå¢åŠ æ»¾å‹•é˜»åŠ›å’Œè¼ªèƒç£¨è€—ã€‚è³½é“é€šå¸¸å‰ 0Â°~0.5Â° outï¼Œå¾Œ 0.2Â°~0.5Â° inã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">CG Height é‡å¿ƒé«˜åº¦</span>
            <span class="badge badge-b">mm</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            è»Šè¼›é‡å¿ƒé›¢åœ°é¢çš„é«˜åº¦ã€‚å½±éŸ¿æ‰€æœ‰è·é‡è½‰ç§»çš„é‡ã€‚<br>
            <span class="text-slate-500">é‡å¿ƒè¶Šé«˜ â†’ å´å‚¾è¶Šå¤§ã€è·é‡è½‰ç§»è¶Šå¤§ â†’ ä¸åˆ©æ“æ§ã€‚ä¸€èˆ¬è¡—è»Š 400-550mmï¼Œè·‘è»Š 350-450mmï¼Œæ–¹ç¨‹å¼ 250-300mmã€‚</span>
          </div>
        </div>

        <div class="card2 p-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-bold">G-G Diagram æ‘©æ“¦åœ“</span>
          </div>
          <div class="text-xs text-slate-300 leading-relaxed">
            ä»¥å´å‘ G ç‚ºæ©«è»¸ã€ç¸±å‘ G ç‚ºç¸±è»¸çš„æ©¢åœ“åœ–ï¼Œè¡¨ç¤ºè»Šè¼›åœ¨å„æ–¹å‘ä¸Šçš„æœ€å¤§åŠ é€Ÿèƒ½åŠ›ã€‚<br>
            <span class="text-slate-500">åœ“å¿ƒ = ç›´ç·šç­‰é€Ÿã€‚å·¦å³ = éå½ã€‚ä¸Š = åŠ é€Ÿã€‚ä¸‹ = ç…è»Šã€‚å¥½çš„è»Šæ‰‹æœƒè®“ G åŠ›è»Œè·¡è²¼è‘—æ‘©æ“¦åœ“çš„é‚Šç·£èµ°ã€‚</span>
          </div>
        </div>

      </div>
    </div>

  </div>

  <!-- Tips -->
  <div class="card p-5 mb-4">
    <div class="section-title">è³½é“æ—¥èª¿æ ¡å°æŠ€å·§</div>
    <div class="space-y-2">
      <div class="card2 p-3 flex gap-3 items-start">
        <span class="text-lg">ğŸ”§</span>
        <div class="text-xs text-slate-300 leading-relaxed"><strong>æ¯æ¬¡åªæ”¹ä¸€å€‹è®Šæ•¸</strong> â€” åŒæ™‚æ”¹å½ˆç°§å’Œ ARB å°±ç„¡æ³•åˆ¤æ–·å“ªå€‹æœ‰æ•ˆã€‚æ”¹ä¸€é …ï¼Œè·‘å¹¾åœˆï¼Œè¨˜éŒ„æ„Ÿå—ï¼Œå†æ”¹ä¸‹ä¸€é …ã€‚</div>
      </div>
      <div class="card2 p-3 flex gap-3 items-start">
        <span class="text-lg">ğŸŒ¡ï¸</span>
        <div class="text-xs text-slate-300 leading-relaxed"><strong>å…ˆç¢ºèªè¼ªèƒåœ¨å·¥ä½œæº«åº¦</strong> â€” è¼ªèƒä¸åœ¨æº«åº¦çª—å£å…§ï¼Œä»»ä½•åº•ç›¤èª¿æ•´çš„æ„Ÿå—éƒ½ä¸æº–ç¢ºã€‚å…ˆè·‘ 2-3 åœˆæš–èƒå†è©•ä¼°ã€‚</div>
      </div>
      <div class="card2 p-3 flex gap-3 items-start">
        <span class="text-lg">ğŸ“Š</span>
        <div class="text-xs text-slate-300 leading-relaxed"><strong>ç”¨ Baseline åŠŸèƒ½å°æ¯”</strong> â€” èª¿æ•´å‰å…ˆæŒ‰ã€Œè¨­ç‚º Baselineã€ï¼Œèª¿å®Œé‡ç®—å°±èƒ½çœ‹åˆ° Î”USï¼ˆè½‰å‘ä¸è¶³æ¢¯åº¦è®ŠåŒ–ï¼‰æ•¸å€¼ã€‚</div>
      </div>
      <div class="card2 p-3 flex gap-3 items-start">
        <span class="text-lg">ğŸ”´</span>
        <div class="text-xs text-slate-300 leading-relaxed"><strong>Understeer æ¯” Oversteer å®‰å…¨</strong> â€” å¦‚æœä¸ç¢ºå®šï¼Œä¿æŒå¾®å¾® Understeerï¼ˆLLTD æ¯”é‡é‡åˆ†ä½ˆé«˜ 2-3%ï¼‰ã€‚æ¨é ­å¯ä»¥é æ”¶æ²¹é–€ä¿®æ­£ï¼Œç”©å°¾éœ€è¦å³æ™‚åæ‰“æ–¹å‘ç›¤ã€‚</div>
      </div>
      <div class="card2 p-3 flex gap-3 items-start">
        <span class="text-lg">ğŸ’¨</span>
        <div class="text-xs text-slate-300 leading-relaxed"><strong>é«˜é€Ÿå½å’Œä½é€Ÿå½åˆ†é–‹çœ‹</strong> â€” ä½¿ç”¨ Tier 3 çš„ Contribution åˆ†æã€‚ç©ºåŠ›åœ¨ä½é€Ÿå½å¹¾ä¹ç„¡æ•ˆï¼Œä½†åœ¨é«˜é€Ÿå½å¯èƒ½ä¸»å°è½‰å‘ç‰¹æ€§ã€‚</div>
      </div>
      <div class="card2 p-3 flex gap-3 items-start">
        <span class="text-lg">ğŸ“</span>
        <div class="text-xs text-slate-300 leading-relaxed"><strong>èƒå£“ç®¡ç†æ˜¯æœ€ä¾¿å®œçš„èª¿æ ¡</strong> â€” åˆ©ç”¨ã€Œè¼ªèƒå£“åŠ›ç®¡ç†ã€è¨˜éŒ„å†·/ç†±èƒå£“ï¼Œç³»çµ±æœƒå»ºè­°ä¸‹æ¬¡çš„å†·èƒå£“è¨­å®šã€‚æ¯”æ›å½ˆç°§ä¾¿å®œå¤šäº†ã€‚</div>
      </div>
    </div>
  </div>

  <!-- About -->
  <div class="card p-5">
    <div class="section-title">é—œæ–¼æœ¬ç³»çµ±</div>
    <div class="text-xs text-slate-400 leading-relaxed space-y-2">
      <p>Racing Dynamics æ˜¯åŸºæ–¼ <strong>Milliken & Milliken, Race Car Vehicle Dynamics</strong> ç­‰ç¶“å…¸æ–‡ç»çš„è»Šè¼›å‹•æ…‹è¨ˆç®—å·¥å…·ã€‚</p>
      <p>ç‰©ç†å¼•æ“åŒ…å«ï¼šRoll Stiffness å´å‚¾å‰›æ€§åˆ†æã€LLTD åˆ†è§£ï¼ˆå¹¾ä½•+å½ˆæ€§ï¼‰ã€Pacejka è¼ªèƒæ¨¡å‹ã€é˜»å°¼æ¯”åˆ†æã€ç¸±å‘è·é‡è½‰ç§»ã€Slip Angle è‡ªè¡Œè»Šæ¨¡å‹ã€Yaw Gain åèˆªå¢ç›Šã€‚</p>
      <p>æ‰€æœ‰è¨ˆç®—åœ¨æœ¬åœ°é›¢ç·šåŸ·è¡Œï¼Œä¸éœ€è¦ç¶²è·¯é€£ç·šã€‚</p>
      <p class="text-slate-600">v3.3 Desktop Â· USADA-KARROT</p>
    </div>
  </div>

</div>

</main>

<script src="js/tire-data.js"></script>
<script src="js/dynamics-model.js"></script>
<script src="js/car-presets.js"></script>
<script src="js/api.js"></script>
<script>
const COLORS=['#38bdf8','#f472b6','#34d399','#facc15','#a78bfa','#fb923c','#22d3ee','#e879f9','#84cc16','#f87171'];

function app(){return{
  currentTab:'predict',
  tabs:[
    {id:'predict',label:'è½‰å‘é æ¸¬',sub:'Handling Prediction'},
    {id:'advisor',label:'èª¿æ ¡å»ºè­°',sub:'Setup Advisor'},
    {id:'spring',label:'å½ˆç°§è¨ˆç®—',sub:'Spring Calculator'},
    {id:'tire',label:'è¼ªèƒåˆ†æ',sub:'Tire Analysis'},
    {id:'guide',label:'ä½¿ç”¨èªªæ˜',sub:'User Guide'},
  ],
  tier:1,
  // Prediction inputs
  pred:{front_spring_rate:240,rear_spring_rate:925,front_arb:300,rear_arb:200,front_track:1440,rear_track:1380,front_motion_ratio:1.0,rear_motion_ratio:1.0,weight_front_pct:41.5,total_weight:570,cg_height:280,wheelbase:2730,tire_spring_rate:220,front_roll_center_height:50,rear_roll_center_height:100},
  showAdvancedT1:false,
  tire:{fl_temp:88,fr_temp:92,rl_temp:85,rr_temp:90,fl_pressure:1.88,fr_pressure:1.92,rl_pressure:1.85,rr_pressure:1.90,front_compound:'yokohama_ad08r',rear_compound:'yokohama_ad08r',front_optimal_pressure:2.14,rear_optimal_pressure:2.21,front_tire_width:0,rear_tire_width:0,sameFrontRear:true},
  tireOptions:[],
  adv:{fl_weight:112.5,fr_weight:114.5,rl_weight:170,rr_weight:173,speed_kmh:180,frontal_area:1.2,front_downforce_coeff:1.3,rear_downforce_coeff:1.5,front_bump_force:80,front_rebound_force:120,rear_bump_force:100,rear_rebound_force:150,front_camber_deg:-3.7,rear_camber_deg:-2.5,front_toe_deg:0.5,rear_toe_deg:0.3,braking_g:0,accel_g:0},
  result:null,
  baseline:null,      // {tier, params, tire, adv, baselineUSG, baselineNorm}
  deltaResult:null,   // {delta_us, delta_norm, rel_norm, delta_tendency_zh, entry_delta, exit_delta}
  contribChart:null,
  // Pressure unit
  pressureUnit:'psi',  // 'psi', 'bar', 'kpa'
  // Tire Pressure Management
  tpm:{
    show:false,
    cold_fl:1.90, cold_fr:1.90, cold_rl:1.80, cold_rr:1.80,
    hot_fl:0, hot_fr:0, hot_rl:0, hot_rr:0,
    laps:3,
    ambient_temp:28,
    track_temp:40,
    target_front:2.10, target_rear:2.00,
    result:null,
  },
  // Street mode
  streetMode:false,
  streetCar:'',
  streetCarDetail:null,
  carPresets:[],
  carPresetGroups:[],
  // Tire analysis
  compoundList:['yokohama_ad08r','bridgestone_re71rs','michelin_cup2','pirelli_trofeo_r','federal_rsrr','nankang_ar1','michelin_ps4s','slick_soft'],
  selCompounds:['yokohama_ad08r','michelin_cup2','federal_rsrr'],
  tireGripChartObj:null,tirePressChartObj:null,
  // Advisor
  advisorResult:null,
  // Spring Calculator
  springCalc:{mode:'freq_to_spring',target_hz:2.5,spring_rate:80,corner_mass:250,motion_ratio:0.85,tire_spring_rate:220},
  springCalcResult:null,
  springTable:[],
  arbCalc:{target_roll_grad:1.5,front_pct:55,spring_roll_front:0,spring_roll_rear:0,total_weight:1000,cg_height:300},
  arbResult:null,
  // G-G chart
  ggChartObj:null,
  // Corner weight canvas
  cwCanvasDrawn:false,
  // Wheel upgrade
  wheelUpgrade:{
    enabled:false,
    front_rim:18, rear_rim:18,
    front_width:225, rear_width:225,
    front_result:null, rear_result:null,
    oem_front_spring:220, oem_rear_spring:220,
  },

  get resultLabel(){
    if(!this.result) return '';
    if(this.tier===3 && this.result.prediction) return this.result.prediction.steady_state.tendency_zh;
    return this.result.adjusted_tendency_zh || this.result.tendency_zh || '';
  },
  get resultColor(){
    const t = this.tier===3&&this.result?.prediction ? this.result.prediction.steady_state.tendency : (this.result?.adjusted_tendency||this.result?.tendency||'');
    return this.tendencyColor(t);
  },
  get resultGradient(){
    if(!this.result) return '';
    if(this.tier===3 && this.result.prediction) return this.result.prediction.steady_state.understeer_gradient;
    return this.result.adjusted_understeer_gradient ?? this.result.understeer_gradient ?? '';
  },
  get gaugePosition(){
    if(!this.result) return 50;
    let n;
    if(this.tier===3 && this.result.prediction) n = this.result.prediction.steady_state.normalized;
    else n = this.result.adjusted_normalized ?? this.result.understeer_normalized ?? 0;
    return ((n + 1) / 2 * 100);
  },
  get baselineGaugePos(){
    if(!this.baseline) return 50;
    return ((this.baseline.baselineNorm + 1) / 2 * 100);
  },
  get selectedTireInfo(){
    return this.tireOptions.find(t=>t.id===this.tire.front_compound)||null;
  },
  get availableWidthsFront(){
    const t = this.tireOptions.find(t=>t.id===this.tire.front_compound);
    return t?.available_widths || [185,195,205,215,225,235,245,255,265,275,285,295,305,315,325];
  },
  get availableWidthsRear(){
    const c = this.tire.sameFrontRear ? this.tire.front_compound : this.tire.rear_compound;
    const t = this.tireOptions.find(t=>t.id===c);
    return t?.available_widths || [185,195,205,215,225,235,245,255,265,275,285,295,305,315,325];
  },

  // Pressure conversion (internal always bar)
  get pressureStep(){ return this.pressureUnit==='psi'?0.5:this.pressureUnit==='kpa'?5:0.01; },
  fromBar(bar){
    if(this.pressureUnit==='psi') return Math.round(bar*14.5038*10)/10;
    if(this.pressureUnit==='kpa') return Math.round(bar*100);
    return Math.round(bar*100)/100;
  },
  toBar(val){
    const v=parseFloat(val)||0;
    if(this.pressureUnit==='psi') return Math.round(v/14.5038*1000)/1000;
    if(this.pressureUnit==='kpa') return Math.round(v/100*1000)/1000;
    return v;
  },
  switchPressureUnit(u){ this.pressureUnit=u; },

  tendencyColor(t){
    if(t==='Understeer') return 'text-red-400';
    if(t==='Oversteer') return 'text-sky-400';
    return 'text-green-400';
  },
  gripColor(v){
    if(!v) return 'text-slate-400';
    if(v>=0.95) return 'text-green-400';
    if(v>=0.85) return 'text-yellow-400';
    return 'text-red-400';
  },

  init(){
    this.tireOptions = api.getTires();
  },

  loadPresets(){
    if(this.carPresets.length) return;
    this.carPresets = api.getPresets();
    // Build grouped structure by manufacturer
    const brandMap = {
      'Toyota':    { match: id => /^toyota_|^ae86/.test(id), zh: 'è±ç”° Toyota' },
      'Lexus':     { match: id => /^lexus_/.test(id), zh: 'Lexus' },
      'Honda':     { match: id => /^honda_/.test(id), zh: 'æœ¬ç”° Honda' },
      'Nissan':    { match: id => /^nissan_/.test(id), zh: 'æ—¥ç”¢ Nissan' },
      'Mazda':     { match: id => /^mazda_/.test(id), zh: 'é¦¬è‡ªé” Mazda' },
      'Subaru':    { match: id => /^subaru_/.test(id), zh: 'é€Ÿéœ¸é™¸ Subaru' },
      'Mitsubishi':{ match: id => /^mitsubishi_/.test(id), zh: 'ä¸‰è± Mitsubishi' },
      'Suzuki':    { match: id => /^suzuki_/.test(id), zh: 'éˆ´æœ¨ Suzuki' },
      'BMW':       { match: id => /^bmw_/.test(id), zh: 'BMW' },
      'Porsche':   { match: id => /^porsche_/.test(id), zh: 'ä¿æ™‚æ· Porsche' },
      'Mercedes':  { match: id => /^mercedes_|^amg_/.test(id), zh: 'è³“å£« Mercedes-AMG' },
      'Audi':      { match: id => /^audi_/.test(id), zh: 'å¥§è¿ª Audi' },
      'VW':        { match: id => /^vw_/.test(id), zh: 'ç¦æ–¯ VW' },
      'Ferrari':   { match: id => /^ferrari_/.test(id), zh: 'æ³•æ‹‰åˆ© Ferrari' },
      'Lamborghini':{ match: id => /^lamborghini_/.test(id), zh: 'è—å¯¶å …å°¼ Lamborghini' },
      'Alfa Romeo':{ match: id => /^alfa_/.test(id), zh: 'æ„›å¿«ç¾…å¯†æ­ Alfa Romeo' },
      'Maserati':  { match: id => /^maserati_/.test(id), zh: 'ç‘ªèæ‹‰è’‚ Maserati' },
      'Fiat/Abarth':{ match: id => /^fiat_/.test(id), zh: 'é£›é›…ç‰¹/é˜¿å·´æ–¯ Abarth' },
      'Lotus':     { match: id => /^lotus_/.test(id), zh: 'è“®èŠ± Lotus' },
      'McLaren':   { match: id => /^mclaren_/.test(id), zh: 'éº¥æ‹‰å€« McLaren' },
      'Aston Martin':{ match: id => /^aston_/.test(id), zh: 'å¥§æ–¯é “é¦¬ä¸ Aston Martin' },
      'Caterham':  { match: id => /^caterham_/.test(id), zh: 'Caterham' },
      'MINI':      { match: id => /^mini_/.test(id), zh: 'MINI' },
      'Ford':      { match: id => /^ford_/.test(id), zh: 'ç¦ç‰¹ Ford' },
      'Chevrolet': { match: id => /^chevrolet_/.test(id), zh: 'é›ªä½›è˜­ Chevrolet' },
      'Dodge':     { match: id => /^dodge_/.test(id), zh: 'é“å¥‡ Dodge' },
      'Tesla':     { match: id => /^tesla_/.test(id), zh: 'ç‰¹æ–¯æ‹‰ Tesla' },
      'Hyundai':   { match: id => /^hyundai_/.test(id), zh: 'ç¾ä»£ Hyundai' },
      'Kia':       { match: id => /^kia_/.test(id), zh: 'èµ·äº Kia' },
      'BYD':       { match: id => /^byd_/.test(id), zh: 'æ¯”äºè¿ª BYD' },
      'Radical':   { match: id => /^radical_/.test(id), zh: 'Radical' },
      'Ariel':     { match: id => /^ariel_/.test(id), zh: 'Ariel' },
    };
    const groups = [];
    const used = new Set();
    for (const [brand, cfg] of Object.entries(brandMap)) {
      const cars = this.carPresets.filter(c => cfg.match(c.id));
      if (cars.length) {
        groups.push({ label: cfg.zh, cars });
        cars.forEach(c => used.add(c.id));
      }
    }
    // Catch any unmatched
    const others = this.carPresets.filter(c => !used.has(c.id));
    if (others.length) groups.push({ label: 'å…¶ä»– Other', cars: others });
    this.carPresetGroups = groups;
  },

  applyPreset(){
    if(!this.streetCar){ this.streetCarDetail=null; return; }
    const d = api.getPreset(this.streetCar);
    this.streetCarDetail = d;
    // Apply locked params
    const p = d.params;
    this.pred.front_spring_rate = p.front_spring_rate;
    this.pred.rear_spring_rate = p.rear_spring_rate;
    this.pred.front_arb = p.front_arb;
    this.pred.rear_arb = p.rear_arb;
    this.pred.front_track = p.front_track;
    this.pred.rear_track = p.rear_track;
    this.pred.front_motion_ratio = p.front_motion_ratio;
    this.pred.rear_motion_ratio = p.rear_motion_ratio;
    this.pred.weight_front_pct = p.weight_front_pct;
    this.pred.total_weight = p.total_weight;
    this.pred.cg_height = p.cg_height;
    this.pred.wheelbase = p.wheelbase;
    // Apply tire defaults
    const t = d.tire_defaults || {};
    this.tire.front_compound = t.front_compound || 'yokohama_ad08r';
    this.tire.rear_compound = t.rear_compound || this.tire.front_compound;
    this.tire.sameFrontRear = (this.tire.front_compound === this.tire.rear_compound);
    // å¾è¼ªèƒè³‡æ–™åº«å–å¾—æœ€ä½³èƒå£“
    const ftire = this.tireOptions.find(x=>x.id===this.tire.front_compound);
    const rtire = this.tireOptions.find(x=>x.id===this.tire.rear_compound);
    this.tire.front_optimal_pressure = ftire?.optimal_pressure_front_bar || t.front_optimal_pressure || 2.14;
    this.tire.rear_optimal_pressure = rtire?.optimal_pressure_rear_bar || t.rear_optimal_pressure || 2.21;
    // Set tire pressures
    this.tire.fl_pressure = this.tire.front_optimal_pressure;
    this.tire.fr_pressure = this.tire.front_optimal_pressure;
    this.tire.rl_pressure = this.tire.rear_optimal_pressure;
    this.tire.rr_pressure = this.tire.rear_optimal_pressure;
    // å˜—è©¦å¾ OEM èƒå¯¬è¨­å®š
    const oemSize = d.oem_tire_size || '';
    const fwMatch = oemSize.match(/F:\s*(\d+)\//);
    const rwMatch = oemSize.match(/R:\s*(\d+)\//);
    this.tire.front_tire_width = fwMatch ? parseInt(fwMatch[1]) : 0;
    this.tire.rear_tire_width = rwMatch ? parseInt(rwMatch[1]) : 0;
    // å¾ OEM è¼ªèƒè¦æ ¼è‡ªå‹•ä¼°ç®—å½ˆç°§ç‡
    const specs = d.oem_tire_specs;
    if (specs) {
      const fSpring = api.estimateTireSpring(specs.front.width, specs.front.aspect);
      const rSpring = api.estimateTireSpring(specs.rear.width, specs.rear.aspect);
      this.pred.tire_spring_rate = Math.round((fSpring + rSpring) / 2);
      this.wheelUpgrade.oem_front_spring = fSpring;
      this.wheelUpgrade.oem_rear_spring = rSpring;
      // åˆå§‹åŒ–æ›æ¡†é è¨­å€¼
      this.wheelUpgrade.front_rim = specs.front.rim;
      this.wheelUpgrade.rear_rim = specs.rear.rim;
      this.wheelUpgrade.front_width = specs.front.width;
      this.wheelUpgrade.rear_width = specs.rear.width;
      this.wheelUpgrade.enabled = false;
      this.wheelUpgrade.front_result = null;
      this.wheelUpgrade.rear_result = null;
      // åŒæ­¥èƒå¯¬ï¼ˆè‹¥ OEM è¦æ ¼æœ‰ï¼‰
      this.tire.front_tire_width = specs.front.width;
      this.tire.rear_tire_width = specs.rear.width;
    }
    // Apply geometry defaults
    const g = d.geometry_defaults || {};
    this.adv.front_camber_deg = g.front_camber_deg || -1.5;
    this.adv.rear_camber_deg = g.rear_camber_deg || -2.0;
    this.adv.front_toe_deg = g.front_toe_deg || 0;
    this.adv.rear_toe_deg = g.rear_toe_deg || 0;
    // Sync tpm defaults with selected tire
    this.tpm.cold_fl = this.tire.front_optimal_pressure;
    this.tpm.cold_fr = this.tire.front_optimal_pressure;
    this.tpm.cold_rl = this.tire.rear_optimal_pressure;
    this.tpm.cold_rr = this.tire.rear_optimal_pressure;
    this.tpm.target_front = this.tire.front_optimal_pressure;
    this.tpm.target_rear = this.tire.rear_optimal_pressure;
    this.tpm.hot_fl = 0; this.tpm.hot_fr = 0; this.tpm.hot_rl = 0; this.tpm.hot_rr = 0;
    this.tpm.result = null;
    // Apply damper defaults if car has adjustable dampers
    const dd = d.damper_defaults;
    if(dd){
      this.adv.front_bump_force = dd.front_bump_force || 80;
      this.adv.front_rebound_force = dd.front_rebound_force || 120;
      this.adv.rear_bump_force = dd.rear_bump_force || 100;
      this.adv.rear_rebound_force = dd.rear_rebound_force || 150;
    }
    // Set corner weights from weight distribution
    const tw = p.total_weight;
    const fpct = p.weight_front_pct / 100;
    this.adv.fl_weight = Math.round(tw * fpct / 2 * 10) / 10;
    this.adv.fr_weight = Math.round(tw * fpct / 2 * 10) / 10;
    this.adv.rl_weight = Math.round(tw * (1 - fpct) / 2 * 10) / 10;
    this.adv.rr_weight = Math.round(tw * (1 - fpct) / 2 * 10) / 10;
    // Clear previous results and baseline
    this.result = null;
    this.baseline = null;
    this.deltaResult = null;
    // é¸è»Šå¾Œé è¨­ Tier 1 (å¿«é€Ÿæ¨¡å¼)ï¼Œä½¿ç”¨è€…å¯è‡ªè¡Œåˆ‡æ›
    this.tier = 1;
  },

  resetDamper(){
    if(!this.streetCarDetail?.damper_defaults) return;
    const dd = this.streetCarDetail.damper_defaults;
    this.adv.front_bump_force = dd.front_bump_force;
    this.adv.front_rebound_force = dd.front_rebound_force;
    this.adv.rear_bump_force = dd.rear_bump_force;
    this.adv.rear_rebound_force = dd.rear_rebound_force;
  },

  applyWheelUpgrade(){
    if(!this.streetCarDetail?.oem_tire_specs) return;
    const specs = this.streetCarDetail.oem_tire_specs;
    this.wheelUpgrade.front_result = api.calcWheelUpgrade(specs.front, this.wheelUpgrade.front_rim, this.wheelUpgrade.front_width);
    this.wheelUpgrade.rear_result = api.calcWheelUpgrade(specs.rear, this.wheelUpgrade.rear_rim, this.wheelUpgrade.rear_width);
  },

  applyWheelSpringRate(){
    const fr = this.wheelUpgrade.front_result;
    const rr = this.wheelUpgrade.rear_result;
    if(fr && !fr.error && rr && !rr.error){
      this.pred.tire_spring_rate = Math.round((fr.spring_rate + rr.spring_rate) / 2);
      // æ›´æ–°èƒå¯¬
      this.tire.front_tire_width = this.wheelUpgrade.front_width;
      this.tire.rear_tire_width = this.wheelUpgrade.rear_width;
    }
  },

  resetWheelUpgrade(){
    if(!this.streetCarDetail?.oem_tire_specs) return;
    const specs = this.streetCarDetail.oem_tire_specs;
    this.wheelUpgrade.front_rim = specs.front.rim;
    this.wheelUpgrade.rear_rim = specs.rear.rim;
    this.wheelUpgrade.front_width = specs.front.width;
    this.wheelUpgrade.rear_width = specs.rear.width;
    this.wheelUpgrade.front_result = null;
    this.wheelUpgrade.rear_result = null;
    this.pred.tire_spring_rate = Math.round((this.wheelUpgrade.oem_front_spring + this.wheelUpgrade.oem_rear_spring) / 2);
    this.tire.front_tire_width = specs.front.width;
    this.tire.rear_tire_width = specs.rear.width;
  },

  switchTier(t){
    const prev = this.tier;
    this.tier = t;
    // åˆ‡æ› Tier å¾Œè‡ªå‹•é‡æ–°è¨ˆç®—ï¼ˆå¦‚æœä¹‹å‰å·²æœ‰çµæœï¼‰
    if(this.result && prev !== t) this.$nextTick(()=>this.runPrediction());
  },

  onTireSelect(axle){
    // é¸è¼ªèƒå¾Œè‡ªå‹•å¸¶å…¥æœ€ä½³èƒå£“
    const id = axle === 'front' ? this.tire.front_compound : this.tire.rear_compound;
    const t = this.tireOptions.find(t=>t.id===id);
    if(t){
      if(axle === 'front' || this.tire.sameFrontRear){
        this.tire.front_optimal_pressure = t.optimal_pressure_front_bar;
        this.tire.fl_pressure = t.optimal_pressure_front_bar;
        this.tire.fr_pressure = t.optimal_pressure_front_bar;
        // åŒæ­¥ TPM å†·èƒå£“
        this.tpm.cold_fl = t.optimal_pressure_front_bar;
        this.tpm.cold_fr = t.optimal_pressure_front_bar;
        this.tpm.target_front = t.optimal_pressure_front_bar;
      }
      if(axle === 'rear' || this.tire.sameFrontRear){
        this.tire.rear_optimal_pressure = t.optimal_pressure_rear_bar;
        this.tire.rl_pressure = t.optimal_pressure_rear_bar;
        this.tire.rr_pressure = t.optimal_pressure_rear_bar;
        this.tpm.cold_rl = t.optimal_pressure_rear_bar;
        this.tpm.cold_rr = t.optimal_pressure_rear_bar;
        this.tpm.target_rear = t.optimal_pressure_rear_bar;
      }
      // å‰å¾Œç›¸åŒæ¨¡å¼ä¸‹åŒæ­¥å¾Œè¼ªé…æ–¹
      if(this.tire.sameFrontRear){
        this.tire.rear_compound = this.tire.front_compound;
      }
      // è‡ªå‹•å¸¶å…¥å¯ç”¨èƒå¯¬ï¼ˆå¦‚æœç›®å‰å¯¬åº¦ä¸åœ¨é¸é …ä¸­å‰‡é‡ç½®ï¼‰
      if(this.tire.front_tire_width > 0 && !t.available_widths.includes(this.tire.front_tire_width)){
        this.tire.front_tire_width = 0;
      }
    }
  },

  switchTab(id){
    this.currentTab=id;
    if(id==='tire') this.$nextTick(()=>{this.drawTireGrip();this.drawTirePress()});
    if(id==='advisor' && this.result && !this.advisorResult) this.runAdvisor();
    if(id==='spring' && !this.springTable.length) this.runSpringCalc();
  },

  toggleArr(arr,v){const i=arr.indexOf(v);if(i>=0)arr.splice(i,1);else arr.push(v)},

  // === Prediction ===
  runPrediction(){
    // å‰å¾Œç›¸åŒæ¨¡å¼ä¸‹åŒæ­¥å¾Œè¼ª
    if(this.tire.sameFrontRear){
      this.tire.rear_compound = this.tire.front_compound;
    }
    // å»ºæ§‹ tire_params (å«èƒå¯¬)
    const tireParams = {...this.tire};
    if(this.tier===1){
      // Tier 1 å¿«é€Ÿæ¨¡å¼ï¼šä½¿ç”¨ Tier 2 APIï¼Œè‡ªå‹•å¸¶å…¥å»ºè­°èƒå£“å’Œé è¨­æº«åº¦
      const quickTire = {
        front_compound: this.tire.front_compound,
        rear_compound: this.tire.rear_compound,
        front_optimal_pressure: this.tire.front_optimal_pressure,
        rear_optimal_pressure: this.tire.rear_optimal_pressure,
        front_tire_width: this.tire.front_tire_width,
        rear_tire_width: this.tire.rear_tire_width,
      };
      // ä½¿ç”¨æœ€ä½³æº«åº¦å’Œå»ºè­°èƒå£“ï¼ˆå¾è¼ªèƒè³‡æ–™åº«è‡ªå‹•å¸¶å…¥ï¼‰
      const ftire = this.tireOptions.find(t=>t.id===this.tire.front_compound);
      const rtire = this.tireOptions.find(t=>t.id===this.tire.rear_compound);
      quickTire.fl_temp = ftire?.optimal_temp || 80;
      quickTire.fr_temp = ftire?.optimal_temp || 80;
      quickTire.rl_temp = rtire?.optimal_temp || 80;
      quickTire.rr_temp = rtire?.optimal_temp || 80;
      quickTire.fl_pressure = ftire?.optimal_pressure_front_bar || 2.14;
      quickTire.fr_pressure = ftire?.optimal_pressure_front_bar || 2.14;
      quickTire.rl_pressure = rtire?.optimal_pressure_rear_bar || 2.21;
      quickTire.rr_pressure = rtire?.optimal_pressure_rear_bar || 2.21;
      this.result = api.predictTier2(this.pred, quickTire);
    } else if(this.tier===2){
      this.result = api.predictTier2(this.pred, tireParams);
    } else {
      this.result = api.predictTier3(this.pred, tireParams, this.adv);
    }
    if(this.tier===3 && this.result?.contribution) this.$nextTick(()=>{this.drawContribution();this.drawCornerWeight();this.drawGGDiagram()});
    // Reset advisor when prediction changes
    this.advisorResult=null;
    // Auto-compare against baseline if set (Tier 1 & 2 are compatible since both use Tier 2 API)
    const compatibleTier = (t) => t <= 2 ? 2 : t;
    if(this.baseline && compatibleTier(this.baseline.tier) === compatibleTier(this.tier)) this.computeDelta();
    else this.deltaResult = null;
  },

  setBaseline(){
    if(!this.result) return;
    // Extract the USG and normalized from current result based on tier
    let usg, norm;
    if(this.tier===3 && this.result.prediction){
      usg = this.result.prediction.steady_state.understeer_gradient;
      norm = this.result.prediction.steady_state.normalized;
    } else {
      // Tier 1 (å¿«é€Ÿ) and Tier 2 both return Tier 2 format
      usg = this.result.adjusted_understeer_gradient ?? this.result.understeer_gradient;
      norm = this.result.adjusted_normalized ?? this.result.understeer_normalized;
    }
    // Deep copy current inputs as baseline snapshot
    this.baseline = {
      tier: this.tier,
      params: JSON.parse(JSON.stringify(this.pred)),
      tire: JSON.parse(JSON.stringify(this.tire)),
      adv: JSON.parse(JSON.stringify(this.adv)),
      baselineUSG: usg,
      baselineNorm: norm,
    };
    this.deltaResult = null; // Reset delta (current = baseline)
  },

  clearBaseline(){
    this.baseline = null;
    this.deltaResult = null;
  },

  analyzePressure(){
    const t = this.tpm;
    const corners = ['fl','fr','rl','rr'];
    const cold = {fl:t.cold_fl, fr:t.cold_fr, rl:t.cold_rl, rr:t.cold_rr};
    const hot = {fl:t.hot_fl, fr:t.hot_fr, rl:t.hot_rl, rr:t.hot_rr};
    const target = {fl:t.target_front, fr:t.target_front, rl:t.target_rear, rr:t.target_rear};

    // Rise = hot - cold
    const rise = {}, rise_display = {}, rise_color = {};
    const vs = {}, vs_display = {}, vs_color = {};
    const suggest = {}, suggest_display = {};
    const advice = [];

    const fmt = (bar) => {
      if(this.pressureUnit==='psi') return (bar*14.5038).toFixed(1);
      if(this.pressureUnit==='kpa') return Math.round(bar*100).toString();
      return bar.toFixed(2);
    };
    const fmtSign = (bar) => {
      const v = fmt(Math.abs(bar));
      return (bar>=0?'+':'-') + v;
    };

    let avgRiseFront = 0, avgRiseRear = 0;
    for(const c of corners){
      if(hot[c] <= 0) continue; // not measured
      rise[c] = hot[c] - cold[c];
      rise_display[c] = fmtSign(rise[c]);
      // Rise color: normal 0.2-0.4 bar rise is typical
      const r = rise[c];
      rise_color[c] = r < 0.1 ? 'text-sky-400' : r < 0.25 ? 'text-green-400' : r < 0.45 ? 'text-yellow-400' : 'text-red-400';

      // vs target
      vs[c] = hot[c] - target[c];
      vs_display[c] = fmtSign(vs[c]);
      vs_color[c] = Math.abs(vs[c]) < 0.05 ? 'text-green-400' : Math.abs(vs[c]) < 0.15 ? 'text-yellow-400' : 'text-red-400';

      // Suggest cold = cold + (target - hot) = cold - vs
      suggest[c] = Math.max(0.5, cold[c] - vs[c]);
      suggest_display[c] = fmt(suggest[c]);
    }

    // Check if any corner not measured
    const measured = corners.filter(c => hot[c] > 0);
    if(measured.length === 0){
      this.tpm.result = null;
      return;
    }

    // Avg rise front / rear
    if(hot.fl > 0 && hot.fr > 0) avgRiseFront = ((rise.fl||0) + (rise.fr||0)) / 2;
    if(hot.rl > 0 && hot.rr > 0) avgRiseRear = ((rise.rl||0) + (rise.rr||0)) / 2;

    // Fill missing display with '--'
    for(const c of corners){
      if(!rise_display[c]) { rise_display[c]='--'; rise_color[c]='text-slate-500'; }
      if(!vs_display[c]) { vs_display[c]='--'; vs_color[c]='text-slate-500'; }
      if(!suggest_display[c]) suggest_display[c]='--';
    }

    // Advice
    if(t.laps <= 2 && avgRiseFront < 0.15) advice.push('åƒ…è·‘ ' + t.laps + ' åœˆï¼Œèƒå£“å‡å¹…åå° â€” è¼ªèƒå¯èƒ½é‚„æ²’é€²å…¥å·¥ä½œæº«åº¦ï¼Œå»ºè­°å¤šè·‘ 1-2 åœˆå†é‡');
    if(avgRiseFront > 0.45) advice.push('å‰è¼ªå‡å£“è¼ƒå¤§ (' + fmt(avgRiseFront) + ') â€” å¯èƒ½éåº¦æ¨é ­æˆ–ç…è»Šéé‡');
    if(avgRiseRear > 0.45) advice.push('å¾Œè¼ªå‡å£“è¼ƒå¤§ (' + fmt(avgRiseRear) + ') â€” å¯èƒ½æœ‰éåº¦æ»‘ç§»æˆ–å‹•åŠ›è¼¸å‡ºéå¤§');

    // Left/right imbalance
    if(hot.fl > 0 && hot.fr > 0){
      const diff = Math.abs(rise.fl - rise.fr);
      if(diff > 0.15) advice.push('å‰è¼ªå·¦å³å‡å£“å·® ' + fmt(diff) + ' â€” å¯èƒ½è³½é“åå–®å´å½æˆ– camber ä¸å‡');
    }
    if(hot.rl > 0 && hot.rr > 0){
      const diff = Math.abs(rise.rl - rise.rr);
      if(diff > 0.15) advice.push('å¾Œè¼ªå·¦å³å‡å£“å·® ' + fmt(diff) + ' â€” æª¢æŸ¥ alignment æˆ–é§•é§›ç¿’æ…£');
    }

    // Front vs rear rise rate
    if(avgRiseFront > 0 && avgRiseRear > 0){
      const ratio = avgRiseFront / avgRiseRear;
      if(ratio > 1.3) advice.push('å‰è¼ªå‡å£“æ¯”å¾Œè¼ªé«˜ â€” å‰è»¸è² æ“”è¼ƒå¤§ï¼Œå¯èƒ½åè½‰å‘ä¸è¶³');
      else if(ratio < 0.7) advice.push('å¾Œè¼ªå‡å£“æ¯”å‰è¼ªé«˜ â€” å¾Œè»¸è² æ“”è¼ƒå¤§ï¼Œå¯èƒ½åè½‰å‘éåº¦');
    }

    // Stint planning
    if(t.laps >= 5 && avgRiseFront > 0.35){
      advice.push('é•· stint (' + t.laps + 'åœˆ) å‡å£“æ˜é¡¯ï¼Œè€ƒæ…®è¨­å®šè¼ƒä½å†·èƒå£“è®“ä¸­æ®µåœˆå£“åœ¨æœ€ä½³å€é–“');
    }

    // Temperature note
    if(t.track_temp > 45){
      advice.push('è·¯é¢æº«åº¦ ' + t.track_temp + 'Â°C åé«˜ï¼Œè¼ªèƒå‡å£“æœƒåŠ é€Ÿï¼Œå»ºè­°é™ä½å†·èƒå£“ ' + fmt(0.07) + ' å·¦å³');
    }

    this.tpm.result = {
      rise_display, rise_color,
      vs_display, vs_color,
      suggest_display,
      advice,
      suggest_bar: suggest, // for applyHotPressure suggest cold
    };
  },

  applyHotPressure(){
    // Apply the measured hot pressures to the main prediction inputs
    const t = this.tpm;
    if(t.hot_fl > 0) this.tire.fl_pressure = t.hot_fl;
    if(t.hot_fr > 0) this.tire.fr_pressure = t.hot_fr;
    if(t.hot_rl > 0) this.tire.rl_pressure = t.hot_rl;
    if(t.hot_rr > 0) this.tire.rr_pressure = t.hot_rr;
  },

  computeDelta(){
    if(!this.baseline) return;
    // Tier 1 å¿«é€Ÿæ¨¡å¼ internally uses Tier 2, so compare as Tier 2
    const t = this.baseline.tier === 1 ? 2 : this.baseline.tier;
    // Build baseline inputs
    const baseInputs = {params: this.baseline.params};
    const curInputs = {params: JSON.parse(JSON.stringify(this.pred))};
    if(t >= 2){
      baseInputs.tire_params = this.baseline.tire;
      curInputs.tire_params = JSON.parse(JSON.stringify(this.tire));
    }
    if(t >= 3){
      baseInputs.advanced_params = this.baseline.adv;
      curInputs.advanced_params = JSON.parse(JSON.stringify(this.adv));
    }
    const resp = api.compare(t, baseInputs, curInputs);
    if(resp.delta){
      this.deltaResult = {
        delta_us: resp.delta.understeer_gradient,
        delta_norm: resp.delta.normalized,
        rel_norm: resp.delta.relative_normalized,
        delta_tendency_zh: resp.delta.tendency_zh,
        entry_delta: resp.delta.turn_entry_delta,
        exit_delta: resp.delta.turn_exit_delta,
        contribution: resp.delta.contribution,
      };
    }
  },

  drawContribution(){
    const ctx=document.getElementById('contributionChart');
    if(!ctx||!this.result?.contribution) return;
    if(this.contribChart) this.contribChart.destroy();
    const c=this.result.contribution;
    const labels=['æ©Ÿæ¢°','è¼ªèƒ','ç©ºåŠ›','Camber','Toe','Bump Rubber','Damper(å…¥)','Damper(å‡º)'];
    const vals=[c.mechanical,c.tire,c.aero,c.camber,c.toe,c.bump_rubber,c.damper_entry,c.damper_exit];
    this.contribChart=new Chart(ctx,{
      type:'bar',
      data:{labels,datasets:[{data:vals,backgroundColor:vals.map(v=>v>0?'rgba(239,68,68,.6)':'rgba(56,189,248,.6)'),borderRadius:4}]},
      options:{responsive:true,indexAxis:'y',plugins:{legend:{display:false}},scales:{x:{grid:{color:'rgba(255,255,255,.05)'},ticks:{color:'#94a3b8',callback:v=>v>0?'+'+v:v}},y:{ticks:{color:'#e2e8f0',font:{size:10}}}}}
    });
  },

  // === Setup Advisor ===
  runAdvisor(){
    if(!this.result){
      this.advisorResult=null;
      return;
    }
    this.advisorResult = api.analyzeSetup(this.result, this.tier, this.pred, this.adv);
  },

  advisorPriorityIcon(p){
    return p==='high'?'ğŸ”´':p==='medium'?'ğŸŸ¡':'ğŸŸ¢';
  },
  advisorCategoryIcon(c){
    const map={spring:'ğŸ”§',arb:'âš™ï¸',damper:'ğŸ›¢ï¸',tire:'ğŸ›',aero:'ğŸ’¨',geometry:'ğŸ“',weight:'âš–ï¸',balance:'âš ï¸'};
    return map[c]||'ğŸ“‹';
  },

  // === Spring Calculator ===
  runSpringCalc(){
    const sc=this.springCalc;
    if(sc.mode==='freq_to_spring'){
      this.springCalcResult=api.calcSpringFromFreq(sc.target_hz,sc.corner_mass,sc.motion_ratio,sc.tire_spring_rate);
    }else{
      this.springCalcResult=api.calcFreqFromSpring(sc.spring_rate,sc.corner_mass,sc.motion_ratio,sc.tire_spring_rate);
    }
    this.springTable=api.calcSpringTable(sc.corner_mass,sc.motion_ratio,sc.tire_spring_rate);
  },
  springCatColor(cat){
    return cat==='comfort'?'text-sky-400':cat==='street'?'text-green-400':cat==='track'?'text-yellow-400':'text-red-400';
  },
  springCatLabel(cat){
    return cat==='comfort'?'èˆ’é©':cat==='street'?'è¡—é“':cat==='track'?'è³½é“':'ç«¶æŠ€';
  },
  springCatBadge(cat){
    return cat==='comfort'?'badge-b':cat==='street'?'badge-g':cat==='track'?'badge-y':'badge-r';
  },
  loadFromPrediction(){
    const tw=this.pred.total_weight||1000;
    const wf=this.pred.weight_front_pct||50;
    this.springCalc.corner_mass=Math.round(tw*wf/100/2);
    this.springCalc.motion_ratio=this.pred.front_motion_ratio||1.0;
    this.springCalc.tire_spring_rate=this.pred.tire_spring_rate||220;
    this.runSpringCalc();
  },
  runArbCalc(){
    const ac=this.arbCalc;
    this.arbResult=api.calcArbSizing(ac.total_weight,ac.cg_height,ac.target_roll_grad,ac.front_pct,ac.spring_roll_front,ac.spring_roll_rear);
  },
  loadArbFromPrediction(){
    if(!this.result)return;
    this.arbCalc.total_weight=this.pred.total_weight||1000;
    this.arbCalc.cg_height=this.pred.cg_height||300;
    this.arbCalc.spring_roll_front=this.result.front_roll_stiffness_spring||(this.result.mechanical?.roll_stiffness_front)||0;
    this.arbCalc.spring_roll_rear=this.result.rear_roll_stiffness_spring||(this.result.mechanical?.roll_stiffness_rear)||0;
    this.runArbCalc();
  },

  // === Enhanced Charts ===
  drawCornerWeight(){
    if(this.tier!==3||!this.result?.corner_weight)return;
    const c=document.getElementById('cwCanvas');
    if(!c)return;
    const ctx=c.getContext('2d');
    const w=c.width,h=c.height;
    ctx.clearRect(0,0,w,h);
    const cw=this.result.corner_weight;
    const maxW=Math.max(cw.fl,cw.fr,cw.rl,cw.rr);
    // Car body
    ctx.strokeStyle='rgba(255,255,255,0.2)';
    ctx.lineWidth=2;
    ctx.beginPath();
    ctx.roundRect(40,30,w-80,h-60,12);
    ctx.stroke();
    // Center line
    ctx.strokeStyle='rgba(255,255,255,0.08)';
    ctx.setLineDash([4,4]);
    ctx.beginPath();ctx.moveTo(w/2,30);ctx.lineTo(w/2,h-30);ctx.stroke();
    ctx.beginPath();ctx.moveTo(40,h/2);ctx.lineTo(w-40,h/2);ctx.stroke();
    ctx.setLineDash([]);
    // Corner circles
    const corners=[{x:70,y:55,v:cw.fl,l:'FL'},{x:w-70,y:55,v:cw.fr,l:'FR'},{x:70,y:h-55,v:cw.rl,l:'RL'},{x:w-70,y:h-55,v:cw.rr,l:'RR'}];
    for(const p of corners){
      const ratio=p.v/maxW;
      const r=14+ratio*10;
      const alpha=0.3+ratio*0.5;
      ctx.fillStyle=`rgba(56,189,248,${alpha})`;
      ctx.beginPath();ctx.arc(p.x,p.y,r,0,Math.PI*2);ctx.fill();
      ctx.fillStyle='#e2e8f0';ctx.font='bold 11px system-ui';ctx.textAlign='center';
      ctx.fillText(roundN(p.v,1)+'kg',p.x,p.y+4);
      ctx.fillStyle='#94a3b8';ctx.font='9px system-ui';
      ctx.fillText(p.l,p.x,p.y-r-4);
    }
    // Info text
    ctx.fillStyle='#94a3b8';ctx.font='9px system-ui';ctx.textAlign='center';
    ctx.fillText(`F/R: ${roundN(cw.front_pct,1)}% / ${roundN(100-cw.front_pct,1)}%`,w/2,h-8);
    ctx.fillText(`Cross: ${roundN(cw.cross_weight_pct,1)}%`,w/2,18);
  },

  drawGGDiagram(){
    if(this.tier!==3||!this.result)return;
    const c=document.getElementById('ggChart');
    if(!c)return;
    if(this.ggChartObj)this.ggChartObj.destroy();
    // Estimate max lateral G from tire grip
    const maxLatG=this.result.tire?.front_avg>=0.5?Math.min(this.result.tire.front_avg*1.3,2.0):1.2;
    const maxBrakeG=this.adv.braking_g>0?this.adv.braking_g:maxLatG*0.9;
    const maxAccelG=this.adv.accel_g>0?this.adv.accel_g:maxLatG*0.5;
    // Build friction ellipse points
    const pts=[];
    for(let a=0;a<=360;a+=5){
      const rad=a*Math.PI/180;
      const latMax=maxLatG;
      const longMax=Math.sin(rad)>0?maxAccelG:maxBrakeG;
      const lat=latMax*Math.cos(rad);
      const lon=longMax*Math.sin(rad);
      pts.push({x:roundN(lat,3),y:roundN(lon,3)});
    }
    this.ggChartObj=new Chart(c,{
      type:'scatter',
      data:{datasets:[
        {label:'æ‘©æ“¦åœ“',data:pts,borderColor:'rgba(56,189,248,0.5)',backgroundColor:'rgba(56,189,248,0.05)',fill:true,pointRadius:0,showLine:true,tension:0.1},
        {label:'åŸé»',data:[{x:0,y:0}],pointRadius:6,pointBackgroundColor:'#34d399',pointBorderColor:'#34d399'}
      ]},
      options:{responsive:true,aspectRatio:1,plugins:{legend:{labels:{color:'#e2e8f0',font:{size:10}}}},
        scales:{
          x:{title:{display:true,text:'å´å‘ G (Lateral)',color:'#94a3b8'},grid:{color:'rgba(255,255,255,0.05)'},ticks:{color:'#94a3b8'},min:-maxLatG*1.2,max:maxLatG*1.2},
          y:{title:{display:true,text:'ç¸±å‘ G (Longitudinal)',color:'#94a3b8'},grid:{color:'rgba(255,255,255,0.05)'},ticks:{color:'#94a3b8'},min:-maxBrakeG*1.3,max:maxAccelG*1.3}
        }
      }
    });
  },

  // === Tire Analysis ===
  getTireParams(id){
    // å…ˆå¾ tireOptions (API è³‡æ–™) æ‰¾ï¼Œå¦å‰‡ç”¨ legacy
    const t = this.tireOptions.find(t=>t.id===id);
    if(t) return [t.optimal_temp, t.temp_window, t.peak_grip, t.name_zh || t.name];
    const legacy = {slick_soft:[90,12,1.08],slick_hard:[100,18,1.02],soft:[85,15,1.05],medium:[95,20,1.0],hard:[105,25,.95],wet:[55,30,.7]};
    const p = legacy[id];
    return p ? [...p, id] : [95,20,1.0,id];
  },

  drawTireGrip(){
    const ctx=document.getElementById('tireGripChart');if(!ctx)return;
    if(this.tireGripChartObj)this.tireGripChartObj.destroy();
    const ds=[];let ci=0;
    for(const name of this.selCompounds){
      const[opt,win,peak,label]=this.getTireParams(name);
      const col=COLORS[ci++%COLORS.length];const pts=[];
      for(let t=20;t<=140;t+=2){const d=Math.abs(t-opt);const f=Math.exp(-.5*(d/win)**2)*peak;pts.push({x:t,y:Math.round(f*1000)/10})}
      ds.push({label:label,data:pts,borderColor:col,pointRadius:0,tension:.4});
    }
    this.tireGripChartObj=new Chart(ctx,{type:'scatter',data:{datasets:ds},options:{responsive:true,showLine:true,plugins:{legend:{labels:{color:'#e2e8f0',font:{size:10}}}},scales:{x:{title:{display:true,text:'èƒæº« (Â°C)',color:'#94a3b8'},grid:{color:'rgba(255,255,255,.05)'},ticks:{color:'#94a3b8'}},y:{title:{display:true,text:'æŠ“åœ°åŠ› %',color:'#94a3b8'},grid:{color:'rgba(255,255,255,.05)'},ticks:{color:'#94a3b8'}}}}});
  },
  drawTirePress(){
    const ctx=document.getElementById('tirePressureChart');if(!ctx)return;
    if(this.tirePressChartObj)this.tirePressChartObj.destroy();
    const pts=[];for(let p=1.5;p<=2.3;p+=.02){const f=Math.max(50,100-20*Math.abs(p-1.9));pts.push({x:Math.round(p*100)/100,y:Math.round(f*10)/10})}
    this.tirePressChartObj=new Chart(ctx,{type:'scatter',data:{datasets:[{label:'Grip vs Pressure',data:pts,borderColor:'#38bdf8',backgroundColor:'rgba(56,189,248,.1)',fill:true,pointRadius:0,tension:.4}]},options:{responsive:true,showLine:true,plugins:{legend:{display:false}},scales:{x:{title:{display:true,text:'èƒå£“ (bar)',color:'#94a3b8'},grid:{color:'rgba(255,255,255,.05)'},ticks:{color:'#94a3b8'}},y:{title:{display:true,text:'æŠ“åœ°åŠ› %',color:'#94a3b8'},grid:{color:'rgba(255,255,255,.05)'},ticks:{color:'#94a3b8'},min:80,max:110}}}});
  },
}}
</script>
</body>
</html>
